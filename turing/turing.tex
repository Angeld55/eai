\chapter{Машини на Тюринг}

\setlength{\epigraphwidth}{0.65\textwidth}\epigraph{Turing’s ‘Machines’. These machines are humans who calculate. (Wittgenstein 1947 [1980]: 1096).}

\newcommand{\tape}[1]{\cdots\blank\blank\blank{#1}\blank\blank\blank\cdots}

\newcommand{\goleft}{\lhd}
\newcommand{\goright}{\rhd}
\newcommand{\stay}{\Box}


% \begin{framed}
%   {\bf Теза на Чърч-Тюринг:} Всеки алгоритъм може да се осъществи като машина на Тюринг.
% \end{framed}

\section{Основни понятия}
\index{Тюринг}
\index{машина на Тюринг!детерминирана}
\marginpar{Тук до голяма степен следваме \cite[Глава 3]{sipser3}}
\marginpar{Понятието за машина на Тюринг има много еквивалентни дефиниции. }
{\em Детерминирана} машина на Тюринг ще наричаме осморка от вида 
\[\M = \TM,\] където:
\begin{itemize}
\item 
  $Q$ - крайно множество от състояния;
\item
  $\Sigma$ - крайна азбука за входа;
\item
  $\Gamma$ - крайна азбука за лентата, $\Sigma \subseteq \Gamma$;
\item
  $\qstart$ - начално състояние, $\qstart \in Q$;
\item
  $\blank$ - празен символ,  $\blank \in \Gamma \setminus \Sigma$;
\item
  \marginpar{Тези две състояния ще наричаме заключителни}
  $\qaccept \in Q$ - приемащо състояние;
\item
  $\qreject \in Q$ - отхвърлящо състояние, където $\qaccept \neq \qreject$;
\item
  % \marginpar{Няма нужда да изискваме главата да остава върху същата клетка от лентата}
  \marginpar{Това означава, че веднъж достигнем ли заключително състояние, не можем да правим повече преходи. Тук следваме \cite[стр. 169]{sipser3} и \cite[стр. 327]{hopcroft2}.}
  $\delta:Q'\times\Gamma \to Q\times \Gamma \times \{\goleft,\goright,\stay\}$ - функция на преходите, където
  $Q' = Q \setminus\{\qaccept, \qreject\}$.
\end{itemize}

Сега ще опишем как $\M$ работи върху вход думата $\alpha \in \Sigma^\star$.
Първоначално безкрайната лента съдържа само думата $\alpha$. Останалите клетки на лентата съдържат символа $\blank$.
Освен това, $\M$ се намира в началното състояние $\qstart$ и главата за четене е върху най-левия символ на $\alpha$.
Работата на $\M$ е описана от функцията на преходите $\delta$.
  
\begin{itemize}
\item 
  \marginpar{На англ. instanteneous description}
  Формално, {\bf моментната конфигурация} (или описание) на едно изчисление на машина на Тюринг
  е тройка от вида 
  \[(\alpha, q, \beta) \in \Gamma^\star\times Q \times \Gamma^\star,\]
  като интерпретацията на тази тройка е, че машината се намира в състояние $q$ и лентата има вида
  \[\tape{\alpha\underline{x}\beta'},\]
  \marginpar{Понякога за удобство ще означаваме моментната конфигурация като $(q,\alpha\underline{x}\beta)$}
  където $\beta = x\beta'$ и четящата глава на машината е поставена върху $x$.
\item
  \marginpar{Тази ситуация можем да опишем като $(q, \alpha\underline{\blank})$}
  Ако $\beta = \varepsilon$, това означава, че главата на машината е върху $\blank$, т.е.
  лентата има вида  \[\tape{\alpha\ \underline{\blank}}\]
\item
  Макар и да имаме безкрайна лента, моментната конфигурация, която може да се представи като {\em крайна} дума,
  описва цялото моментно състояние на машината на Тюринг.
  % Обърнете внимание, че тройката $(\blank\blank ab, q, \blank)$ описва същото моментно състояние както и 
  % тройката $(ab, q, \varepsilon)$.
\item
  {\bf Началната конфигурация} за входната дума $\alpha \in \Sigma^\star$ представлява тройката
  \[(\varepsilon, \qstart, \alpha).\]
  \begin{itemize}
  \item
    Ако $\alpha = x\alpha'$, за $x \in \Sigma$, то  лентата има вида \[\cdots\blank\blank\ \underline{x}\alpha'\blank\blank\cdots,\]
  \item
    Ако $\alpha = \varepsilon$, то началната конфигурация е $(\varepsilon, \qstart, \varepsilon)$ и лентата има вида
    \[\tape{\underline{\blank}}\]
  \end{itemize}
\item
  {\bf Заключителна конфигурация} представлява тройка от вида
  \[(\beta, \qaccept, \gamma), \text{ или }(\beta, \qreject, \gamma).\]
  Ако машината, която работи върху дадена входна дума, достигне до заключително състояние, ще казваме
  че машината {\em спира работа}.
\end{itemize}

Както за автомати, удобно е да дефинираме бинарна релация $\vdash_\M$ над $\Gamma^\star \times Q \times \Gamma^\star$,
която ще казва как моментната конфигурация на машината $\M$ се променя при изпълнение на една стъпка.
\begin{itemize}
\item
  \marginpar{Понеже $z \in \Gamma$, то е възможно и $z = \blank$.}
  Ако $\delta_\M(q,z) = (p,y,\goright)$, то дефинираме $(\alpha, q, z\beta) \vdash_\M (\alpha y, p, \beta)$.
  Това означава, че ако лентата е имала вида 
  \[\tape{\alpha\underline{z}\beta},\]
  след този преход на $\M$ лентата има следния вид:
  \[\tape{\alpha y\underline{x}\beta'}, \text{ ако }\beta = x\beta',\]
  или 
  \[\tape{\alpha y\underline{\blank}}, \text{ ако }\beta = \varepsilon.\]
\item
  Ако $\delta_\M(q,\blank) = (p,y,\goright)$, то дефинираме също така и $(\alpha, q, \varepsilon) \vdash_\M (\alpha y, p, \varepsilon)$.
  Това означава, че ако лентата е имала вида 
  \[\tape{\alpha\underline{\blank}},\]
  след този преход на $\M$ лентата има следния вид:
  \[\tape{\alpha y\underline{\blank}}\]
\item 
  Ако $\delta_\M(q,z) = (p,y,\goleft)$, то дефинираме $(\alpha x, q, z\beta) \vdash_\M (\alpha , p, xy\beta)$.
  Това означава, че ако лентата е имала вида 
  \[\tape{\alpha x\underline{z}\beta},\]
  след този преход на $\M$ лентата има вида 
  \[\tape{\alpha \underline{x}y\beta}\]
  Също така, в тази ситуация трябва да дефинираме и
  $(\varepsilon, q, z\beta) \vdash_\M (\varepsilon , p, \blank y\beta)$.
  Това означава, че ако лентата е имала вида 
  \[\tape{\underline{z}\beta},\]
  след този преход на $\M$ лентата има вида 
  \[\tape{ \underline{\blank}y\beta}\]
\item
  Ако $\delta_\M(q,\blank) = (p,y,\goleft)$, то дефинираме и $(\alpha x, q, \varepsilon) \vdash_\M (\alpha , p, xy)$,
  а също така и $(\varepsilon, q, \varepsilon) \vdash_\M (\varepsilon , p, \blank y)$,
\item
  Ако $\delta_\M(q, z) = (p, y, \stay)$, то дефинираме $(\alpha, q, z\beta) \vdash_\M (\alpha , p, y\beta)$.
  % Това означава, че ако лентата е имала вида 
  % \[\tape{\alpha \underline{z}\beta},\]
  % след този преход на $\M$ лентата има вида 
  % \[\tape{\alpha \underline{y}\beta}\]
\item
  Ако $\delta_\M(q, \blank) = (p, y, \stay)$, то дефинираме и $(\alpha, q, \varepsilon) \vdash_\M (\alpha , p, y)$.
\end{itemize}
С $\vdash^\star_\M$ ще означаваме рефлексивното и транзитивно затваряне на $\vdash_\M$.

\begin{itemize}
\item
  Машината на Тюринг $\M$ {\bf приема} думата $\alpha$, 
  ако 
  \[(\varepsilon, \qstart, \alpha) \vdash^\star_\M (\gamma_1, \qaccept, \gamma_2),\]
  за някои $\gamma_1, \gamma_2 \in \Gamma^\star$.
\item
  Машината на Тюринг $\M$ {\bf отхвърля} думата $\alpha$, 
  ако 
  \[(\varepsilon, \qstart, \alpha) \vdash^\star_\M (\gamma_1, \qreject, \gamma_2),\]
  за някои $\gamma_1, \gamma_2 \in \Gamma^\star$.
\item
  Машината на Тюринг $\M$ {\bf не приема} думата $\alpha$, 
  ако $\M$ отхвърля $\alpha$ или $\M$ никога не завършва при начална конфигурация $(\varepsilon,\qstart,\alpha)$.
\item
  \index{машина на Тюринг!разрешител}
  \marginpar{На англ. такава машина на Тюринг се нарича {\bf decider} \cite[стр. 170]{sipser3}. Може такива машини на Тюринг да се наричат и тотални \cite[стр. 213]{kozen}.}
  Една машина на Тюринг се нарича {\bf разрешител}, ако при всеки вход достига до заключително състояние,
  т.е. достига до $\qaccept$ или $\qreject$.
\item 
  Езикът, който се {\bf разпознава} от машината $\M$ е:
  \[\L(\M) = \{\alpha\in\Sigma^\star \mid (\varepsilon, \qstart, \alpha) \vdash^\star_\M (\beta, \qaccept, \gamma), \text{ за някои }\beta,\gamma\in\Gamma^\star\}.\]
\item
  \index{език!полуразрешим}
  \marginpar{На англ. {\bf semidecidable language}}
  Езикът $L$ се нарича {\bf полуразрешим}, ако съществува машина на Тюринг $\M$, за която
  $L = \L(\M)$.
  В този случай се казва, че $\M$ разпознава езика $L$.
  \marginpar{В литературата се използва и названието {\bf рекурсивно номеруем език}.}
  Ако една дума $\alpha \in L$, то след крайно много стъпки ще достигнем до състоянието $\qaccept$.
  Ако $\alpha \not\in L$, то не е ясно дали какво се случва с изчислението на $\M$ върху $\alpha$. Възможно е да достигнем до състоянието $\qreject$, но може да попаднем в безкрайно изчисление.
\item
  \index{език!разрешим}
  \marginpar{На англ. {\bf decidable language}}
  Един език $L$ се нарича {\bf разрешим}, ако за него съществува {\em разрешител} $\M$, за която
  $L = \L(\M)$.
  \marginpar{В литературата се използва и названието {\bf рекурсивен език}.}
  В този случай се казва, че $\M$ разрешава езика $L$.
\end{itemize}

\begin{framed}
  \begin{proposition}
    Ако $L$ е разрешим език над азбуката $\Sigma$, то $\Sigma^\star \setminus L$ също е разрешим език.
  \end{proposition}
\end{framed}

От дефинициите е ясно, че всеки разрешим език е полуразрешим.
По-късно, ще видим, че съществуват полуразрешими езици, чиито допълнения не са полуразрешими,
т.е. не всеки полуразрешим език е разрешим.
Една от основните ни задачи ще бъде да класифицираме различни езици като (не)раз\-ре\-ши\-ми и (не)полуразрешими.
За да придобием по-добра интуиция за тези нови понятия, ще разгледаме подробно няколко примера.
Ще видим също как можем да изобразяваме функцията на преходите на $\M$ графично.

\input{turing/examples}

\input{turing/functions}

\input{turing/multitape}
\newpage
\input{turing/nondeterministic}

\input{turing/properties}

% \section{Машини на Тюринг като генератори}

% \marginpar{\cite[стр. 168]{hopcroft1}}
% \marginpar{\cite[стр. 180]{sipser3}}
% \marginpar{На англ. се наричат {\em enumerators}}

% Нека да разгледаме един вариант на многолентовите машини на Тюринг, които ще наричаме {\bf генератори}.
% Нека машината на Тюринг да има две ленти, като в началото и двете ленти са празни.
% \begin{itemize}
% \item 
%   Първата лента ще служи за работна лента - върху нея можем да пишем и четем;
% \item
%   Втората лента служи единствено за изход - върху нея можем само да пишем пишем думи; не можем да четем какво вече сме написали върху нея и не можем да пишем върху вече записана клетка. Думите са разделени със специален символ - $\#$.
%   Това означава, че втората лента има вида
%   \[\omega_1\#\omega_2\#\cdots\#\omega_n\#\blank\blank\cdots\]
% \item
%   Езикът, които се извежда от такъв генератор е съставен от думите, които са изписани на изходната лента.
%   Такива езици ще наричаме {\bf изчислимо изброими}.
%   Обърнете внимание, че измежду думите на изходната лента е възможно да има повторения.
%   Ако езикът е безкраен, то машината ще работи безкрайно много време.
% \end{itemize}

% \begin{framed}
%   \begin{thm}
%     Един език $L$ е полуразрешим точно тогава, когато $L$ е изчислимо номеруем.
%   \end{thm}
% \end{framed}
% \begin{proof}
%   $(\Leftarrow)$ Нека $L$ да се номерира от генераторът $E$.
%   Машината на Тюринг $\M$, за която $L = \L(\M)$ ще работи по следния начин:
%   \begin{enumerate}[1)]
%   \item 
%     При вход думата $\omega$, $\M$ започва да симулира $E$;
%   \item
%     Когато се появи дума $\gamma$ върху изходната лента на $E$, сравняваме $\omega$ с $\gamma$;
%   \item
%     Ако $\omega = \gamma$, то отиваме в състоянието $q_{accept}$ на $\M$ и завършваме;
%   \item
%     В противен случай, отиваме обратно на стъпка $2)$.
%   \end{enumerate}

%   $(\Rightarrow)$ Нека сега $L = \L(\M)$. Целта ни е да изведем всички думи на $L$ върху изходната лента.
%   Основният проблем е, че за дадена дума $\omega$, не знаем за колко стъпки трябва да симулираме $\M$ за да сме сигурни дали думата $\omega \in \L(\M)$ или не. Оказва се, че можем да разрешим този проблем като позволяме да извеждаме повторящи се думи.
%   За целта, да подредим всички думи $\omega_1, \omega_2, \dots $ над азбуката $\Sigma$ спрямо каноничната наредба.
%   \begin{enumerate}[1)]
%   \item
%     Нека $s = 1$;
%   \item 
%     Симулираме $\M$ върху думите $\omega_1,\dots,\omega_s$ за $s$ стъпки;
%   \item
%     За всяка от тези думи $\omega_i$, които се приемат от $\M$, записваме ги върху изходната лента.
%   \item
%     Нека $s = s+1$; Отиваме обратно на стъпка $2)$.
%   \end{enumerate}
% \end{proof}

% \begin{remark}
%   В последната конструкция позволяваме думите на един полуразрешим език $L$ да се 
%   извеждат върху изходната лента многократно. Можем лесно да осигурим условието всяка дума на $L$
%   да се извежда точно по веднъж.
%   На стъпка $s = \pair{i,j}$, то проверяваме дали думата $\omega_i$ се приема успешно от $\M$
%   за {\em точно} $j$ на брой стъпки. Само тогава думата се записва на изходната лента.
  
%   Обърнете внимание, че не можем да осигурим условието думите да се извеждат във възходящ ред
%   относно каноничната наредба.
% \end{remark}

% \begin{framed}
%   \begin{thm}
%     Един език $L$ е разрешим точно тогава, когато съществува генератор за $L$, 
%     който изписва думите на $L$ във възходящ ред относно каноничната наредба.
%   \end{thm}
% \end{framed}
% \begin{proof}
%   $(\Rightarrow)$ Нека $L = \L(\M)$. Тази посока е лесна, защото $\M$ е тотална машина,
%   т.е. за всеки вход $\M$ завършва или в $q_{accept}$ или в $q_{reject}$.
%   \begin{enumerate}[1)]
%   \item 
%     Нека $s = 1$;
%   \item
%     Симулираме $\M$ върху думата $\omega_s$.
%   \item
%     Ако симулацията завърши в състояние $q_{accept}$, то записваме $\omega_s$
%     върху изходната лента. 
%   \item
%     Иначе ако симулацията завърши в състояние $q_{reject}$, то нищо не записваме върху изходната лента. 
%   \item
%     Нека $s = s+1$. Отиваме на стъпка $2)$.
%   \end{enumerate}

%   \marginpar{Ако имам генератор $G$ за $L$ няма алгоритъм, който да ми каже дали $L$ е безкраен език или не. Това означава, че по код на $G$ няма как ефективно да получа код на $\M$}
%   $(\Leftarrow)$ Ако $L$ е краен, то е ясно, че мога да разпозная езика с краен автомат, което е частен случай на тотална машина на Тюринг.
%   По-интересният случай е когато $L$ е безкраен език.
%   Нека $L$ се генерира от машината на Тюринг $G$ като извежда думите на $L$ във възходящ ред.
%   \begin{itemize}
%   \item 
%     Вход дума $\omega$;
%   \item
%     Симулираме $G$ като гледаме думите, които се извеждат на изходната лента.
%     Ако срещнем думата $\omega$, то завършваме в състояние $q_{accept}$.
%   \item
%     Ако срещнем думата $\gamma$, която е по-голяма от $\omega$ относно каноничната наредба, 
%     то завършваме в състояние $q_{reject}$.
%   \end{itemize}
% \end{proof}

\input{turing/coding}

\input{turing/diagonal}

\input{turing/universal}

\input{turing/rice}

\input{turing/rice-shapiro}

\input{turing/computations}
\input{turing/greibach}
\newpage
\input{turing/grammar}

% \input{turing/context-sensitive}

\input{turing/complexity}

\input{turing/problems}

\input{turing/restrictions}

\input{turing/lba}

\input{turing/pcp}

% \section*{Бележки}

% \begin{itemize}
% \item
%   За основните дефиниции следваме основно Глава 3 от \cite{sipser3}.
% \item 
%   За въпросите за неразрешимост следваме основно Глава 8 от \cite{hopcroft1}.
% % \item
% %   За по-задълбочено запознаване с теория на изчислимостта, добри уводни книги са
% %   \cite{ditchev-soskov} и \cite{nikolova-soskova}.
% \end{itemize}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../eai"
%%% End:
