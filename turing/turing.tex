\chapter{Машини на Тюринг}

\newcommand{\tape}[1]{\dots\blank\blank\blank{#1}\blank\blank\blank\dots}
\marginpar{Тук най-вече следваме \cite{sipser3}}

\begin{framed}
  {\bf Теза на Чърч-Тюринг:} Всеки алгоритъм може да се осъществи като машина на Тюринг.
\end{framed}

\section{Основни понятия}
\index{Тюринг}
\index{машина на Тюринг!детерминистична}

\marginpar{Понятието за машина на Тюринг има много еквивалентни дефиниции}
{\em Детерминистична} машина на Тюринг ще наричаме седморка от вида 
\[\M = \TM,\] където:
\begin{itemize}
\item 
  $Q$ - крайно множество от състояния;
\item
  $\Sigma$ - крайна азбука за входа;
\item
  $\Gamma$ - крайна азбука за лентата, $\Sigma \subseteq \Gamma$;
\item
  \marginpar{Няма нужда да изискваме главата да остава върху същата клетка от лентата}
  $\delta:Q\times\Gamma \to Q\times \Gamma \times \{L,R,S\}$ - (частична) функция на преходите;
\item
  $s$ - начално състояние, $s \in Q$;
\item
  $\blank$ - празен символ,  $\blank \in \Gamma \setminus \Sigma$;
\item
  \marginpar{Тези две състояния ще наричаме заключителни}
  $q_{accept} \in Q$ - приемащо състояние;
\item
  \marginpar{$q_{accept} \neq q_{reject}$}
  $q_{reject} \in Q$ - отхвърлящо състояние.
\end{itemize}

Сега ще опишем как $\M$ работи върху вход думата $\alpha \in \Sigma^\star$.
Първоначално, безкрайната лента съдържа само $\alpha$. Останалите клетки на лентата съдържат $\blank$.
Освен това, $\M$ се намира в началното състояние $s$ и главата е върху най-левия символ на $\alpha$.
Работата $\M$ е описана от функцията на преходите.
  
\begin{itemize}
\item 
  % \marginpar{(На англ. instanteneous description)}
  {\bf Моментната конфигурация} (или описание) на едно изчисление на МТ е тройка от вида $(\alpha, q, \beta) \in \Gamma^\star\times Q \times \Gamma^\star$. Това означава, че
  машината се намира в състояние $q$ и лентата има вида
  \[\tape{\alpha\beta},\]
  като главата на машината е поставена върху първия символ на $\beta$.  
\item
  {\bf Началната конфигурация} за входа $\alpha \in \Sigma^\star$ представлява 
  \[(\varepsilon, s, \alpha).\]
  Това означава, че лентата има вида \[\cdots\blank\blank\alpha\blank\blank\cdots\]
  и четящата глава е на първия символ от думата $\alpha$.
\item
  {\bf Заключителна конфигурация} представлява тройка от вида
  \[(\alpha, q_{accept}, \beta), \text{ или }(\alpha, q_{reject}, \beta).\]
  Ако машината, която работи върху дадена входа дума, достигне до заключително състояние, ще казваме
  че машината {\em спира работа}.
\end{itemize}

Както за автомати, удобно е да дефинираме бинарна релация $\vdash_\M$ над $\Gamma^\star \times Q \times \Gamma^\star$,
която ще казва как моментната конфигурация на машината $\M$ се променя при изпълнение на една стъпка.
\begin{itemize}
\item
  Ако $\delta_\M(q,Z) = (p,Y,R)$, то дефинираме $(\alpha, q, Z\beta) \vdash_\M (\alpha Y, p, \beta)$.
  % При $Z = \blank$ също така можем да запишем 
  % $(\alpha, q, \varepsilon) \vdash_\M (\alpha Y, p, \varepsilon)$ (???)
\item 
  Ако $\delta_\M(q,Z) = (p,Y,L)$, то дефинираме $(\alpha X, q, Z\beta) \vdash_\M (\alpha , p, XY\beta)$.
  % При $X = \blank$, имаме $(\varepsilon, q, Z\beta) \vdash_\M (\varepsilon, p, \blank Y\beta)$.
% \item
%   Ако $\delta_\M(q,Z) = (p,Y,N)$, то 
  
\end{itemize}
С $\vdash^\star_\M$ ще означаваме рефлексивното и транзитивно затваряне на $\vdash_\M$.

\begin{itemize}
\item
  \marginpar{Обърнете внимание, че това не е същото като да изискваме функцията на преходите $\delta$ да бъде тотална.}
  Една машина на Тюринг се нарича {\bf тотална}, ако при всеки вход достига до заключително състояние,
  т.е. достига до $q_{accept}$ или $q_{reject}$.
\item 
  Езикът, който се {\bf разпознава} от машината $\M$ е:
  \[\L(\M) = \{\alpha\in\Sigma^\star \mid (\varepsilon, s, \alpha) \vdash^\star_\M (\beta, q_{accept}, \gamma), \text{ за някои }\beta,\gamma\in\Gamma^\star\}.\]
\item
  \index{език!полуразрешим}
  Езикът $L$ се нарича {\bf полуразрешим}, ако съществува машина на Тюринг $\M$, за която
  $L = \L(\M)$.
\item
  \index{език!разрешим}
  Един език $L$ се нарича {\bf разрешим}, ако за него съществува {\em тотална} машина на Тюринг $\M$, за която
  $L = \L(\M)$.
\end{itemize}

\begin{framed}
  \begin{prop}
    Ако $L$ е разрешим език над азбуката $\Sigma$, то $\Sigma^\star \setminus L$ също е разрешим език.
  \end{prop}
\end{framed}

\begin{remark}
  По-късно, ще видим, че съществуват полуразрешими езици, чиито допълнения не са полуразрешими.
\end{remark}

\input{turing/examples}

\section{Основни свойства}

\begin{prop}
  Ако $L$ е разрешим език, то $\ov{L}$ е разрешим език.
\end{prop}
\begin{hint}
  Нека $L = \L(\M)$, където $\M$ е тотална машина на Тюринг.
  Нека $\M'$ е същата като $\M$, само със сменени accept и reject състояния.
  Тогава $\ov{L} = \L(\M')$.
\end{hint}

\begin{prop}
  Ако $L_1$ и $L_2$ са разрешими езици, то $L_1 \cup L_2$ е разрешим език.
\end{prop}
\begin{hint}
  Нека $L_1 = \L(\M_1)$ и $L_2 = \L(\M_2)$.
  Симулираме двете изчисления едновременно.
  Ако едната машина достигне accept състоянието си, то връщаме accept.
\end{hint}

\begin{prop}
  Ако $L_1$ и $L_2$ са полуразрешими езици, то $L_1 \cup L_2$ е полуразрешим език.
\end{prop}

\begin{prop}
  Ако $L_1$ и $L_2$ са разрешими езици, то $L_1 \cap L_2$ е разрешим език.
\end{prop}
\begin{hint}
  Нека $L_1 = \L(\M_1)$ и $L_2 = \L(\M_2)$.
  Симулираме двете изчисления едновременно.
  Ако и двете машини достигнат accept състоянията си, то връщаме accept.
\end{hint}

\begin{framed}
  \begin{thm}
    $L$ и $\ov{L}$ са полуразрешими езици точно тогава, когато $L$ е разрешим език.
  \end{thm}
\end{framed}
\begin{hint}
  Посоката $(\Rightarrow)$ е ясна.
  За посоката $(\Leftarrow)$, нека $L = \L(\M_1)$ и $\ov{L} = \L(\M_2)$.
  Симулираме едновременно и двете изчисления.
  Знаем със сигурност, че точно едно от тях ще завърши в accept състояние.
  Ако това е $\M_1$, връщаме accept.
  Ако това е $\M_2$, връщаме reject.
\end{hint}

\subsection*{Канонична подредба на $\Sigma^\star$}

\marginpar{Тази канонична подредба е необходима единствено за доказателството, че всяка НМТ е еквивалентна на ДМТ}
Нека $\Sigma = \{a_0,a_1,\dots,a_{k-1}\}$.
Подреждаме думите по ред на тяхната дължина.
Думите с еднаква дължина подреждаме по техния числов ред, т.е.
гледаме на буквите $a_i$ като числото $i$ в $k$-ична бройна система.
Тогава думите с дължина $n$ са числата от $0$ до $k^n-1$ записани в $k$-ична бройна система.
Ще означаваме с $\omega_i$ $i$-тата дума в $\Sigma^\star$ при тази подредба.

\begin{example}
  Ако $\Sigma = \{0,1\}$, то наредбата започва така:
  \[\varepsilon, 0, 1, \underbrace{00, 01, 10, 11}_{\text{от $0$ до $3$}}, \underbrace{000, 001, 010, 011, 100, 101, 110, 111}_{\text{от $0$ до $7$}}, 0000, 0001, \dots\]
  В този случай, $\omega_0 = \varepsilon$, $\omega_7 = 000$, $\omega_{13} = 110$.
\end{example}

\input{turing/multitape}
\input{turing/nondeterministic}

% \section{Машини на Тюринг като генератори}

% \marginpar{\cite[стр. 168]{hopcroft1}}
% \marginpar{\cite[стр. 180]{sipser3}}
% \marginpar{На англ. се наричат {\em enumerators}}

% Нека да разгледаме един вариант на многолентовите машини на Тюринг, които ще наричаме {\bf генератори}.
% Нека машината на Тюринг да има две ленти, като в началото и двете ленти са празни.
% \begin{itemize}
% \item 
%   Първата лента ще служи за работна лента - върху нея можем да пишем и четем;
% \item
%   Втората лента служи единствено за изход - върху нея можем само да пишем пишем думи; не можем да четем какво вече сме написали върху нея и не можем да пишем върху вече записана клетка. Думите са разделени със специален символ - $\#$.
%   Това означава, че втората лента има вида
%   \[\omega_1\#\omega_2\#\cdots\#\omega_n\#\blank\blank\cdots\]
% \item
%   Езикът, които се извежда от такъв генератор е съставен от думите, които са изписани на изходната лента.
%   Такива езици ще наричаме {\bf изчислимо изброими}.
%   Обърнете внимание, че измежду думите на изходната лента е възможно да има повторения.
%   Ако езикът е безкраен, то машината ще работи безкрайно много време.
% \end{itemize}

% \begin{framed}
%   \begin{thm}
%     Един език $L$ е полуразрешим точно тогава, когато $L$ е изчислимо номеруем.
%   \end{thm}
% \end{framed}
% \begin{proof}
%   $(\Leftarrow)$ Нека $L$ да се номерира от генераторът $E$.
%   Машината на Тюринг $\M$, за която $L = \L(\M)$ ще работи по следния начин:
%   \begin{enumerate}[1)]
%   \item 
%     При вход думата $\omega$, $\M$ започва да симулира $E$;
%   \item
%     Когато се появи дума $\gamma$ върху изходната лента на $E$, сравняваме $\omega$ с $\gamma$;
%   \item
%     Ако $\omega = \gamma$, то отиваме в състоянието $q_{accept}$ на $\M$ и завършваме;
%   \item
%     В противен случай, отиваме обратно на стъпка $2)$.
%   \end{enumerate}

%   $(\Rightarrow)$ Нека сега $L = \L(\M)$. Целта ни е да изведем всички думи на $L$ върху изходната лента.
%   Основният проблем е, че за дадена дума $\omega$, не знаем за колко стъпки трябва да симулираме $\M$ за да сме сигурни дали думата $\omega \in \L(\M)$ или не. Оказва се, че можем да разрешим този проблем като позволяме да извеждаме повторящи се думи.
%   За целта, да подредим всички думи $\omega_1, \omega_2, \dots $ над азбуката $\Sigma$ спрямо каноничната наредба.
%   \begin{enumerate}[1)]
%   \item
%     Нека $s = 1$;
%   \item 
%     Симулираме $\M$ върху думите $\omega_1,\dots,\omega_s$ за $s$ стъпки;
%   \item
%     За всяка от тези думи $\omega_i$, които се приемат от $\M$, записваме ги върху изходната лента.
%   \item
%     Нека $s = s+1$; Отиваме обратно на стъпка $2)$.
%   \end{enumerate}
% \end{proof}

% \begin{remark}
%   В последната конструкция позволяваме думите на един полуразрешим език $L$ да се 
%   извеждат върху изходната лента многократно. Можем лесно да осигурим условието всяка дума на $L$
%   да се извежда точно по веднъж.
%   На стъпка $s = \pair{i,j}$, то проверяваме дали думата $\omega_i$ се приема успешно от $\M$
%   за {\em точно} $j$ на брой стъпки. Само тогава думата се записва на изходната лента.
  
%   Обърнете внимание, че не можем да осигурим условието думите да се извеждат във възходящ ред
%   относно каноничната наредба.
% \end{remark}

% \begin{framed}
%   \begin{thm}
%     Един език $L$ е разрешим точно тогава, когато съществува генератор за $L$, 
%     който изписва думите на $L$ във възходящ ред относно каноничната наредба.
%   \end{thm}
% \end{framed}
% \begin{proof}
%   $(\Rightarrow)$ Нека $L = \L(\M)$. Тази посока е лесна, защото $\M$ е тотална машина,
%   т.е. за всеки вход $\M$ завършва или в $q_{accept}$ или в $q_{reject}$.
%   \begin{enumerate}[1)]
%   \item 
%     Нека $s = 1$;
%   \item
%     Симулираме $\M$ върху думата $\omega_s$.
%   \item
%     Ако симулацията завърши в състояние $q_{accept}$, то записваме $\omega_s$
%     върху изходната лента. 
%   \item
%     Иначе ако симулацията завърши в състояние $q_{reject}$, то нищо не записваме върху изходната лента. 
%   \item
%     Нека $s = s+1$. Отиваме на стъпка $2)$.
%   \end{enumerate}

%   \marginpar{Ако имам генератор $G$ за $L$ няма алгоритъм, който да ми каже дали $L$ е безкраен език или не. Това означава, че по код на $G$ няма как ефективно да получа код на $\M$}
%   $(\Leftarrow)$ Ако $L$ е краен, то е ясно, че мога да разпозная езика с краен автомат, което е частен случай на тотална машина на Тюринг.
%   По-интересният случай е когато $L$ е безкраен език.
%   Нека $L$ се генерира от машината на Тюринг $G$ като извежда думите на $L$ във възходящ ред.
%   \begin{itemize}
%   \item 
%     Вход дума $\omega$;
%   \item
%     Симулираме $G$ като гледаме думите, които се извеждат на изходната лента.
%     Ако срещнем думата $\omega$, то завършваме в състояние $q_{accept}$.
%   \item
%     Ако срещнем думата $\gamma$, която е по-голяма от $\omega$ относно каноничната наредба, 
%     то завършваме в състояние $q_{reject}$.
%   \end{itemize}
% \end{proof}




% \subsection*{Тезис на Чърч-Тюринг}

% \section{Универсална машина на Тюринг}
% За простота, нека $\Sigma = \{0,1\}$ и $\Gamma = \{0,1,\blank\}$.
% \begin{itemize}
% \item 
%   $X_1 = 0$, $X_2 = 1$, $X_3 = \blank$;
% \item
%   $D_1 = L$, $D_2 = R$
% \end{itemize}


\subsection{Кодиране на краен автомат}

Да разгледаме крайния автомат $\A = \NFA$, където 
\begin{itemize}
\item 
  $Q = \{q_1,\dots,q_n\}$,
\item
  $F = \{q_{k_1},\dots,q_{k_l}\}$,
\item
  $\Sigma = \{a_1,\dots,a_m\}$.
\end{itemize}
Да разгледаме прехода $\Delta(q_i,a_j) \ni q_k$.
Кодираме този преход по следния начин:
\[0^i10^j10^k.\]

\[\code{\Delta} \df \texttt{code}_1\ 11\ \texttt{code}_2\ 11 \cdots 11\ \texttt{code}_r\]

Да обърнем внимание, че в този двоичен код няма последователни единици и той 
започва и завършва с нула.

Да означим 
\[\code{F} \df 0^{k_1}10^{k_2}1\cdots 0^{k_l}.\]

Тогава кодът на $\A$ е думата
\[\code{\A} \df 111\ \code{F}\ 11\ \code{\Delta}\ 111.\]


\subsection{Кодиране на машина на Тюринг}

\subsection*{Кодиране на преход}
Да разгледаме прехода $\delta(q_i,X_j) = (q_k,X_l,D_m)$.
Кодираме този преход по следния начин:
\[0^i10^j10^k10^l10^m\]
Да обърнем внимание, че в този двоичен код няма последователни единици и той 
започва и завършва с нула.


За да кодираме една машина на Тюринг $\M$ е достатъчно да кодираме функцията на преходите $\delta$.
Понеже $\delta$ е крайна функция, нека с числото $r$ да означим броя на всички възможни преходи.
По описания по-горе начин, нека $code_i$ е числото в двоичен запис, получено за $i$-тия преход на $\delta$.
Тогава кодът на $\M$ е следното число в двоичен запис:
\[\code{\M} \df 111\ \texttt{code}_1\ 11\ \texttt{code}_2\ 11\ \cdots\ 11\ \texttt{code}_r\ 111.\]
\begin{itemize}
\item
  Лесно се съобразява, че за две МТ $\M$ и $\M'$ с различни функции на преходите, имаме $\code{\M} \neq \code{\M'}$.
% \item
%   Ще казваме, че числото $r\in\Nat$ е {\bf код на} $\M$, ако $r$, записано в двоичен запис представлява думата $\code{\M}$.
%   Оттук нататък, когато пишем $\M_r$, ще имаме предвид машината на Тюринг с код $r$.
% \item
%   Ясно е, че не всяко естествено число е код на машина на Тюринг, но по дадено число $n$
%   има ефективна процедура, която ни казва дали $n$ е код на машина на Тюринг или не.
% \item
  % С $\pair{\M,\omega}$ ще означаваме кода на $\M$ при вход $\omega$ е числото с двоичен запис описанието на $\M$ и след това прикрепена думата $\omega$.
  % При едно число $r = \pair{M,\omega}$, лесно се намира кода на $\M$.
  % Просто започваме да четем двоичния запис на $r$ докато не срещнем за втори път $111$.
  % След това започва думата $\omega$.
% \item
%   Да въведем означението $\M_i$ за произволно ествестено число $i$.
%   Ако $i$ е код на машина на Тюринг $\M$, то $\M_i \df \M$.
%   Ако $i$ не е код на машина на Тюринг, то $\M_i$ е машина на Тюринг с празна функция на преходите.
\end{itemize}

\begin{example}
  Да се даде пример за кода на конкретна машина на Тюринг.
\end{example}


\begin{prop}
  Следните езици са разрешими:
  \begin{itemize}
  \item 
    $L = \{\code{\M} \mid \M\text{ е машина на Тюринг}\}$;
  \item
    $L = \{\code{\M} \mid \M\text{ е детерминистична машина на Тюринг}\}$.
  \end{itemize}
\end{prop}

\begin{remark}
  Следният език {\bf не} е разрешим:
  \[L_{\texttt{tot}} = \{\code{\M} \mid \M\text{ е тотална машина на Тюринг}\}.\]
\end{remark}


% \section{Изчислими функции}

% Нека е дадена функцията $f:\Nat^k \to \Nat$.
% Ще казваме, че $f$ е изчислима с машината на Тюринг $\M$,
% ако за всяко $n_1,\dots,n_k$ е изпълнено:
% \begin{itemize}
% \item 
%   Представяме всяко от числата $n_1,\dots,n_k$ в монадична бройна система
%   като лентата на $\M$ има вида:  
%   \[\dots \blank \blank \underbrace{1111\dots 11}_{n} \blank\blank\dots,\]
%   като изискваме главата на $\M$ да е позиционирана върху най-лявата единица.
%   Такава конфигурация ще наричаме {\bf стандартна начална конфигурация}.
% \item
%   Ако $f(n_1,\dots,n_k) = m$, то $\M$ завършва с резултат върху лентата
%   \[\dots \blank \blank \underbrace{1111\dots 11}_{m} \blank\blank\dots,\]
%   като главата на $\M$ е върху най-лявата 1-ца.
%   Такава конфигурация се нарича {\bf стандартна финална конфигурация}.
% \item
%   Ако $f(n_1,\dots,n_k)$ е недефенирана, то $\M$ няма да завърши в стандартна конфигурация, т.е.
%   или $\M$ ще работи безкрайно време, или ще завърши в конфигурация, която не е стандартна.
% \end{itemize}

% \begin{example}

%   Да видим, че функцията $f(n) = 2n$ е изчислима.
  
% % \[\stackrel{1}{1}11\ \Rightarrow\ \stackrel{2}{\blank} 111\ \Rightarrow\ \stackrel{3}{\blank}\blank 111\ \Rightarrow\ \stackrel{4}{\blank}1\blank 111\ \Rightarrow\ 1\stackrel{5}{1}\blank 111\ \Rightarrow\  11\stackrel{5}{\blank}111\ \Rightarrow\  11 \blank \stackrel{6}{1}11\]
% % \[\dots \Rightarrow\ 11\blank 111\stackrel{6}{\blank}\ \Rightarrow\ 11\blank 11\stackrel{7}{1}\blank\ \Rightarrow\ 11\blank 1\stackrel{8}{1}\blank\blank\ \Rightarrow\ 11\blank \stackrel{9}{1}1\blank\blank\ \Rightarrow\  1\stackrel{10}{1}\blank 11\blank\blank\]
% % \[\dots \Rightarrow\ \stackrel{10}{\blank}11\blank 11\blank\blank\ \Rightarrow\ \stackrel{2}{1}1\blank 11\blank\blank\ \Rightarrow\ \cdots\]

% \begin{figure}[H]
%   \begin{center}
%     \begin{tikzpicture}[->,>=stealth,thick,node distance=45pt]
%       \tikzstyle{every state}=[circle,minimum size=10pt,auto,scale=.7]
      
%       \node[state]   (1) {$1$};
%       \node[state]            (2) [right of=1]{$2$};
%       \node[state]            (3) [right of=2]{$3$};
%       \node[state]            (4) [right of=3]{$4$};
%       \node[state]            (5) [right of=4]{$5$};
%       \node[state]            (6) [right of=5]{$6$};
%       \node[state]            (7) [right of=6]{$7$};
%       \node[state]            (8) [right of=7]{$8$};
%       \node[state]            (9) [right of=8]{$9$};
%       \node[state]            (10) [right of=9]{$10$};
%       \node[state]            (11) [below of=8]{$11$};
%       \node[state,accepting]  (12) [below of=11]{$12$};
      
%       \begin{scope}[every node/.style={scale=.8}]
%       \path
%       (1) edge [bend left=15] node [above] {$1;L$} (2)
%       (2) edge [bend left=15] node [above] {$1;L$} (3)
%       (2) edge [bend right=15] node [below] {$\blank;L$} (3)
%       % (3) edge [bend left=15] node [above] {$1/1;L$} (4)
%       (3) edge [bend left=15] node [above] {$\blank/1;L$} (4)
%       (4) edge [bend left=15] node [above] {$\blank/1;R$} (5)
%       % (4) edge [bend right=15] node [below] {$1/1;R$} (5)
%       (5) edge [loop below] node [below] {$1;R$} (5)
%       (5) edge [bend left=15] node [above] {$\blank;R$} (6)
%       (6) edge [loop below] node [below] {$1;R$} (6)
%       (6) edge [bend left=15] node [above] {$\blank;L$} (7)
%       (7) edge [bend left=15] node [above] {$1/\blank;L$} (8)
%       % (7) edge [bend right=15] node [below] {$\blank;L$} (8)
%       (8) edge [bend left=15] node [above] {$1;L$} (9)
%       (9) edge [loop below] node [below] {$1;L$} (9)
%       (9) edge [bend right=15] node [below] {$\blank;L$} (10)
%       (10) edge [loop below] node [below] {$1;L$} (10)
%       % (10) [out=130,in=120,above,distance=2.5cm] node [above] {$x;R$} (2)
%       (10) edge [out=140,in=60, above] node [below] {$\blank;R$} (2)
%       (8) edge [] node [right] {$\blank;L$} (11)
%       (11) edge [loop left] node [left] {$1;L$} (11)
%       (11) edge [] node [right] {$\blank;R$} (12);
%       \end{scope}
%     \end{tikzpicture}
%   \end{center}
% \end{figure}

% \begin{align*}
%   _1111 & \to\ _2\blank 111 \to\  _3\blank \blank 111 \to\ _4\blank 1 \blank 111 \to 1_51\blank 111 \to 11_5\blank 111\\
%   & \to 11\blank_6 111 \to \cdots \to 11 \blank 11_71 \to 11 \blank 1_81\blank \to 11 \blank _911\blank \to 11_9 \blank 11\blank\\
%   & \to 1_{10}1\blank 11 \blank \to \cdots \to\ _211\blank 11\blank \to \cdots \to 1_5111\blank 11 \blank \to \cdots \\
%   & \to 1111\blank_6 11\blank \to \cdots
% \end{align*}

% \end{example}

% \begin{problem}
%   За произволно естествено число $n$, дефинирайте МТ $\M_n$ с $n+11$ състояния, за която,
%   ако главата е на най-лявата $1$-ца върху блок от $1$-ци, то $\M_n$
%   завършва като записва $2n$ единици на лентата и завършва в стандартна конфигурация.
% \end{problem}

% \begin{thm}
%   За всяко $k$, съществуват функции от вида $f:\Nat^k\to\Nat$, които не са изчислими с МТ.
% \end{thm}
% \begin{proof}
%   Знаем, че всяка МТ може да се кодира с естествено число.
%   Това означава, че съществуват изброимо безкрайно много различни машини на Тюринг.
%   Също така, ние знаем, че съществуват неизброимо много различни функции от вида $f:\Nat^k\to\Nat$.
%   Заключаваме, че със сигурност съществуват функции, които не са изчислими с МТ.
% \end{proof}

% \section{Примери за разрешими и полуразрешими езици}

% Да напомним, че:
% \begin{itemize}
% \item
%   {\bf полуразрешими} са тези езици, които се разпознават от машина на Тюринг.
% \item
%   {\bf разрешими} са тези езици, които се разпознават от тотална машина на Тюринг.
% \end{itemize}

% Ще разгледаме два основни примера за езици. Единият ще бъде за език, който не е полуразрешим, а другият за език, който е 
% полуразрешим, но не е разрешим.


% % \section{Проблемът за съответствие на Пост (PCP)}

% % \subsection*{MPCP}

\input{turing/diagonal}

\input{turing/universal}

\input{turing/rice}

\input{turing/rice-shapiro}

\subsection*{Валидни и невалидни изчисления на машини на Тюринг}
\marginpar{\cite{hopcroft1} стр. 201}
Да разгледаме машината на Тюринг $\M$.
Дума от вида 
\[\omega_1 \sharp \omega^{rev}_2 \sharp \omega_3 \sharp \omega^{rev}_4\sharp\omega_5\cdots\]
ще наричаме валидно изчисление на $\M$, ако 
\begin{itemize}
\item
  всяко $\omega_i \in \Gamma^\star Q \Gamma^\star$ описва моментна конфигурация
  и $\omega_i$ не завършва на $\blank$.
\item
  $\omega_1 \in s\Sigma^\star$ описва начална конфигурация.
\item
  $\omega_n \in \Gamma^\star Q \Gamma^\star$ описва финална конфигурация.
\item 
  $\omega_i \vdash_\M \omega_{i+1}$ за $i = 1,\dots,n-1$.
\end{itemize}

% \begin{prop}
%   Езикът
%   $L = \{\omega_1 \sharp \omega^{rev}_2 \mid \omega_1, \omega_2 \in \Gamma^\star Q \Gamma^\star\ \&\ \omega_1 \vdash_\M \omega_2\}$
%   е безконтекстен.
% \end{prop}


\begin{lemma}
  \marginpar{\cite{hopcroft1}, стр. 201}
  Множеството от валидни изчисления на машина на Тюринг $\M$ е сечението на два безконтекстни езика $L_1$ и $L_2$.
  Освен това, граматиките на $L_1$ и $L_2$ могат ефективно да бъдат построени от $\M$.
\end{lemma}
\begin{hint}
  Да разгледаме езика
  \[L_3 = \{\alpha\#\beta^{rev} \mid \alpha \vdash_\M \beta\}.\]
  Лесно е да построим стеков автомат $P_3$, който разпознава езика $L_3$.
  Четем буквата $X$. Тогава:
  \begin{itemize}
  \item 
    ако $\delta_\M(q,X) =(p,Y,R)$, то слагаме $Yp$ на върха на стека;
  \item
    ако $\delta_\M(q,X) =(p,Y,L)$, то ако $Z$ е върха на стека, заменяме $Z$ с $pZY$;
  \end{itemize}
  Аналогично разглеждаме безконтекстния език
  \[L_4 = \{\alpha^{rev}\#\beta \mid \alpha \vdash_\M \beta\}.\]
  Сега можем да дефинираме езиците
  \begin{align*}
    & L_1 = (L_3\#)^\star(\{\varepsilon\}\cup \Gamma^\star q_{accept} \Gamma^\star\#)\\
    & L_2 = q_0\Sigma^\star \# (L_4\#)^\star(\{\varepsilon\}\cup \Gamma^\star q_{accept} \Gamma^\star\#),
  \end{align*}
  за които е ясно, че са безконтекстни.
  Тогава езикът от валидните изчисления на $\M$
  е $L_1 \cap L_2$.
\end{hint}

\begin{thm}
  Езикът
  \[L = \{\code{G_1}\cdot\code{G_2} \mid \text{$G_1$ и $G_2$ са безконтекстни граматики и }\L(G_1) \cap \L(G_2) = \emptyset\}\]
  е неразрешим.
\end{thm}
\begin{proof}
  По дадена дума $\code{\M}$, можем ефективно да намерим $G_1$ и $G_2$, за които
  $\L(G_1) \cap \L(G_2)$ са точно валитните изчисления на $\M$.
  Тогава ако $L$ е разрешим език, то $L_{\texttt{Empty}}$ е разрешим език, което е противоречие.
\end{proof}

\begin{lemma}
  Нека е дадена $\M = \TM$.
  Тогава езикът 
  \[L = \{\alpha\sharp\beta^R \mid \alpha,\beta \in \Gamma^\star Q \Gamma^\star\ \&\  \alpha \not\vdash_\M \beta\}\]
  е безконтекстен.
\end{lemma}

\begin{lemma}
  Множеството от невалидни изчисления на машина на Тюринг е безконтекстен език.
\end{lemma}
\begin{proof}
  
\end{proof}

\begin{framed}
  \begin{thm}
    За дадена азбука $\Sigma$, 
    езикът 
    \[L = \{\code{G} \mid G\text{ е безконтекстна граматика и }\L(G) = \Sigma^\star\}\]
    е неразрешим.
  \end{thm}
\end{framed}
\begin{proof}
  По дадена дума $\code{\M}$, можем ефективно да намерим $G$, за която
  $\L(G)$ са точно невалитните изчисления на $\M$.
  Тогава ако допуснем, че $L$ е разрешим език, то $L_{\texttt{Empty}}$ е разрешим, което е противоречие.
\end{proof}

\begin{cor}
  Следните езици не са разрешими:
  \begin{enumerate}[a)]
  \item
    $L = \{\code{G_1}\cdot\code{G_2} \mid \text{$G_1$ и $G_2$ са безконт. грам. и }\L(G_1) = \L(G_2)\}$;
  \item
    $L = \{\code{G_1}\cdot\code{G_2} \mid \text{$G_1$ и $G_2$ са безконт. грам. и }\L(G_1) \subseteq \L(G_2)\}$;
  \item 
    $L = \{\code{G}\cdot r \mid \text{$G$ е безконт. грам. и $r$ е рег. израз и }\L(G) = \L(r)\}$;
  \item
    $L = \{\code{G}\cdot \code{\A} \mid \text{$G$ е безконт. грам. и $\A$ е ДКА и }\L(G) = \L(\A)\}$;
  \item 
    $L = \{\code{G}\cdot r \mid \text{$G$ е безконт. грам. и $r$ е рег. израз и }\L(r) \subseteq \L(G)\}$;
  \item
    $L = \{\code{G}\cdot \code{\A} \mid \text{$G$ е безконт. грам. и $\A$ е ДКА и }\L(\A) \subseteq \L(G)\}$;
  \end{enumerate}
\end{cor}
% \begin{hint}
%   \begin{enumerate}
%   \item 
%     Фикс. $\L(G_1) = \Sigma^\star$.
%   \item
%     Фикс. $\L(G_1) = \Sigma^\star$.
%   \end{enumerate}
% \end{hint}


\begin{remark}
  Добре е да обърнем внимание, че езикът 
  \[L = \{\code{G}\cdot \code{\A} \mid \text{$G$ е безконт. грам. и $\A$ е ДКА и }\L(G) \subseteq \L(\A)\}\]
  е разрешим.
  Това е така, защото $\L(G) \subseteq \L(\A) \iff \L(G) \cap \L(\ov{\A}) = \emptyset$,
  което сечението на безконтекстен и регулярен език е безконтекстен език.
\end{remark}


% \begin{cor}
%   Нека $G_1$ и $G_2$ са произволни безконтекстни граматики, а $r$ е произволен регулярен израз.
%   Следните проблеми са неразрешими:
%   \begin{enumerate}
%   \item 
%     $\L(G_1) = \L(G_2)$;
%   \item
%     $\L(G_2) \subseteq \L(G_1)$;
%   \item
%     $\L(G_1) = \L(r)$;
%   \item
%     $\L(r) \subseteq \L(G_1)$.
%   \end{enumerate}
% \end{cor}


% \input{turing/grammar}

\section*{Бележки}

\begin{itemize}
\item
  За основните дефиниции следваме основно Глава 3 от \cite{sipser3}.
\item 
  За въпросите за неразрешимост следваме основно Глава 8 от \cite{hopcroft1}.
\end{itemize}

% \begin{itemize}
% \item 
% \item
% \item

% \end{itemize}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../eai"
%%% End:
