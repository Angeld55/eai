\subsection{Примерни задачи}

\begin{problem}\label{prob:regular:pumping:an-bn}
  Докажете, че езикът $L = \{a^nb^n \mid n\in \Nat\}$ не е регулярен.
\end{problem}
\begin{proof}
  \mynote{Това е важен пример. По-късно ще видим, че този език е безконтекстен}
  Формално трябва докажем, че
  {\scriptsize
    \[(\forall p \geq 1)(\exists \alpha \in L)[\abs{\alpha} \geq p\ \wedge\ (\forall x,y,z\in\Sigma^\star)[(\alpha = xyz \wedge \abs{y} \geq 1\wedge \abs{xy} \leq p) \Rightarrow (\exists i\in\Nat)[xy^iz \not\in L]].\]}
  Както обяснихме по-горе, доказателството следва стъпките:
\mynote{    
\begin{description}
\item[$(\forall)$]
  Нямаме власт над избора на числото $p$.
\item[$(\exists)$]
  Няма общо правило, което да ни казва как избираме думата $\alpha$. Трябва сами да се досетим. Обърнете внимание, че думата $\alpha$ зависи от константата $p$.
\item[$(\forall)$]
  Не знаем нищо друго за $x$, $y$ и $z$ освен тези две свойства.
\item[$(\exists)$]
  Изборът на $i$ може да зависи разбиването $x$, $y$, $z$. В конкретния пример, не зависи.
\end{description}
}
  \begin{description}
  \item[$(\forall)$]
    % \mynote{Нямаме власт над избора на числото $p$.}
    Разглеждаме произволно число $p \geq 1$.
  \item[$(\exists)$]
    % \mynote{Няма общо правило, което да ни казва как избираме думата $\alpha$. Трябва сами да се досетим. Обърнете внимание, че думата $\alpha$ зависи от константата $p$.}
    Избираме дума $\alpha \in L$, за която $\abs{\alpha} \geq p$. Имаме свободата да изберем каквато дума $\alpha$
    си харесаме, стига тя да принадлежи на $L$ и да има дължина поне $p$.
    Щом имаме тази свобода, нека да изберем думата $\alpha = a^pb^p \in L$.
    Очевидно е, че $\abs{\alpha} \geq p$.
  \item[$(\forall)$]
    % \mynote{Не знаем нищо друго за $x$, $y$ и $z$ освен тези две свойства.}
    Разглеждаме произволно разбиване на $\alpha$ на три части, $\alpha = xyz$,
    за които изискваме свойствата $\abs{xy} \leq p$ и $\abs{y} \geq 1$.
  \item[$(\exists)$]
    % \mynote{Изборът на $i$ може да зависи разбиването $x$, $y$, $z$. В конкретния пример, не зависи.}
    Ще намерим $i\in\Nat$, за което $xy^iz \not\in L$.
    Понеже $\abs{xy} \leq p$, то $y = a^k$, за  $1\leq k \leq p$.
    Тогава ако вземем $i = 0$, получаваме $xy^0z = a^{p-k}b^p$.
    Ясно е, че $xz \not\in L$, защото $p-k < p$.
  \end{description}  
  Тогава от \Corollary{pumping-reg} следва, че $L$ не е регулярен език.
\end{proof}

\begin{remark}
  \mynote{\writedown Съобразете сами!}
  Много често студентите правят следното разсъждение:
  \[(\forall L,L' \subseteq \Sigma^\star)[L \text{ е регулярен}\ \&\ L' \subseteq L \implies L'\text{ е регулярен}].\]
  Съобразете, че в общия случай това твърдение е {\em невярно}.
  За да видим това, достатъчно е да посочим регулярен език $L$, който има като
  подмножество нерегулярен език $L'$.
  Също лесно се вижда, че твърдението
  \[(\forall L,L' \subseteq \Sigma^\star)[L \text{ е регулярен}\ \&\ L \subseteq L' \implies L'\text{ е регулярен}]\]
  е невярно.

  Поради подобни съображения, следните твърдения също са {\em неверни}:
  \begin{align*}
    & (\forall L,L' \subseteq \Sigma^\star)[L \text{ не е регулярен}\ \&\ L' \subseteq L \implies L'\text{ не е регулярен}]\\
    & (\forall L,L' \subseteq \Sigma^\star)[L' \text{ не е регулярен}\ \&\ L' \subseteq L \implies L\text{ не е регулярен}].
  \end{align*}
\end{remark}

\begin{problem}
  Докажете, че езикът $L = \{a^mb^n \mid m,n\in \Nat\ \&\ m < n\}$ не е регулярен.
\end{problem}
\begin{proof}
  Доказателството следва стъпките:
  \begin{description}
  \item[$(\forall)$]
    Разглеждаме произволно число $p \geq 1$.
  \item[$(\exists)$]
    Избираме дума $\alpha \in L$, за която $\abs{\alpha} \geq p$. Имаме свободата да изберем каквато дума $\alpha$
    си харесаме, стига тя да принадлежи на $L$ и да има дължина поне $p$.
    Щом имаме тази свобода, нека да изберем думата $\alpha = a^{p}b^{p+1} \in L$. Очевидно е, че $\abs{\alpha} \geq p$.
  \item[$(\forall)$]
    Разглеждаме произволно разбиване на $\alpha$ на три части, $\alpha = xyz$,
    за които изискваме свойствата $\abs{xy} \leq p$ и $\abs{y} \geq 1$.
  \item[$(\exists)$]
    Ще намерим $i\in\Nat$, за което $xy^iz \not\in L$.
    Понеже $\abs{xy} \leq p$, то $y = a^k$, за  $1\leq k \leq p$.
    Тогава ако вземем $i = 2$, получаваме 
    \[xy^2z = a^{p-k}a^{2k}b^{p+1} = a^{p+k}b^{p+1}.\]
    Ясно е, че $xy^2z \not\in L$, защото $p+k \geq p+1$.
  \end{description}
  Тогава от \Corollary{pumping-reg} следва, че $L$ не е регулярен език.
\end{proof}

\begin{problem}
  Докажете, че езикът $L = \{a^n\ \mid\ n\mbox{ е просто число}\}$ не е регулярен.
\end{problem}
\begin{proof}
  Доказателството следва стъпките:
  \begin{description}
  \item[$(\forall)$] 
    Разглеждаме произволно число $p \geq 1$.
  \item[$(\exists)$]
    Избираме дума $w \in L$, за която $\abs{w} \geq p$. Можем да изберем каквото $w$ 
    си харесаме, стига то да принадлежи на $L$ и да има дължина поне $p$.
    Нека да изберем думата $w \in L$, такава че $\abs{w} > p+1$.
    Знаем, че такава дума съществува, защото $L$ е безкраен език. По-долу ще видим защо този избор е важен за нашите разсъждения.
  \item[$(\forall)$]
    Разглеждаме произволно разбиване на $w$ на три части, $w = xyz$,
    за които изискваме свойствата $\abs{xy} \leq p$ и $\abs{y} \geq 1$.
  \item[$(\exists)$]
    Ще намерим $i$, за което $xy^iz \not\in L$,
    т.е. ще намерим $i$, за което 
    $\abs{xy^iz} = \abs{xz} + i\cdot\abs{y}$ е {\em съставно число}.
    Понеже $\abs{xy} \leq p$ и $\abs{xyz} > p+1$, то $\abs{z} > 1$.
    Да изберем $i = \abs{xz} > 1$. Тогава:
    \mynote{Изискваме $|w| > p+1$, защото искаме да гарантираме, че $|xz| > 1$.}
    \[\abs{xy^iz} = \abs{xz} + i.\abs{y} = \abs{xz} + \abs{xz}.\abs{y} = (1 + \abs{y})\abs{xz}\] е съставно число, следователно 
    $xy^iz \not\in L$.
  \end{description}
  Тогава от \Corollary{pumping-reg} следва, че $L$ не е регулярен език.
\end{proof}

\begin{problem}
  Докажете, че езикът $L = \{a^{n^2}\ \mid\ n\in\Nat\}$ не е регулярен.  
\end{problem}
\begin{proof}
  В тази задача ще използваме следното свойство:
  \[n\text{ не е точен квадрат} \iff (\exists p\in \Nat)[p^2 < n < (p+1)^2].\]
  Доказателството следва стъпките:
  \begin{description}
  \item[$(\forall)$]
    Разглеждаме произволно число $p \geq 1$.
  \item[$(\exists)$]
    Избираме достатъчно дълга дума, която принадлежи на езика $L$.
    Например, нека $w = a^{p^2}$.
  \item[$(\forall)$]
    Разглеждаме произволно разбиване на $w$ на три части, $w = xyz$, 
    като $\abs{xy} \leq p$ и $\abs{y} \geq 1$.
  \item[$(\exists)$]
    Ще намерим $i$, за което $xy^iz \not\in L$.
    В нашия случай това означава, че $\abs{xz} + i\cdot\abs{y}$ не е точен квадрат.
    Тогава за $i = 2$,
    \[p^2 = \abs{xyz} < \abs{xy^2z} = \abs{xyz} + \abs{y} \leq p^2 + p < p^2 + 2p + 1 = (p+1)^2 .\]
    Получаваме, че $p^2 < \abs{xy^2z} < (p+1)^2$,
    откъдето следва, че $\abs{xy^2z}$ не е точен квадрат.
    Следователно, $xy^2z \not\in L$.
  \end{description}
  Тогава от \Corollary{pumping-reg} следва, че $L$ не е регулярен език.  
\end{proof}

\begin{problem}
  Докажете, че езикът $L = \{a^{n!}\ \mid\ n\in\Nat\}$ не е регулярен.  
\end{problem}
\begin{proof}
  Доказателството следва стъпките:
  \begin{description}
  \item[$(\forall)$]
    Разглеждаме произволно число $p \geq 1$.
  \item[$(\exists)$]
    Избираме достатъчно дълга дума, която принадлежи на езика $L$. 
    Например, нека $\omega = a^{(p+1)!}$.
  \item[$(\forall)$]
    Разглеждаме произволно разбиване на $\omega$ на три части, $\omega = xyz$, 
    като $\abs{xy} \leq p$ и $\abs{y} \geq 1$.
    Да обърнем внимание, че $1 \leq \abs{y} \leq p$
  \item[$(\exists)$]
    Ще намерим $i$, за което $xy^iz \not\in L$.
    Това означава да съществува $n$, за което $n! < |xy^iz| < (n+1)!$
    Да разгледаме $i = 2$. Тогава:
    \begin{align*}
      (p+1)! & < |xy^2z| \\
             & = (p+1)! + |y|\\
             & \leq (p+1)! + p \\
             & < (p+1)! + (p+1)!(p+1) \\
             & = (p+2)!
    \end{align*}


    % Възможно ли е $xy^0z \in L$?
    % Понеже $\abs{xyz} = (p+2)!$, това означава, че $\abs{xz} = k!$, за някое $k \leq p+1$.
    % Тогава 
    % \[\abs{y} = \abs{xyz} - \abs{xz} = (p+2)! - k! \geq (p+2)! - (p+1)! = (p+1).(p+1)! > p.\]
    % Достигнахме до противоречие с условието, че $\abs{y} \leq p$.
  \end{description}
  Тогава от \Corollary{pumping-reg} следва, че $L$ не е регулярен език.  
\end{proof}


\begin{problem}
  Докажете, че езикът
  \[L = \{\alpha\beta \in \{a,b\}^\star \mid |\alpha| = |\beta|\ \&\ \alpha \neq \beta\}\] не е регулярен.
\end{problem}
\begin{hint}
  Да допуснем, че $L$ е регулярен.
  Тогава езикът $\ov{L} = \{a,b\}^\star \setminus L$ също е регулярен.
  Ясно е, че
  \[\ov{L} = \{ \alpha\beta \in \{a,b\}^\star\ \mid\ \alpha = \beta\}\ \cup\ \{\alpha \in \{a,b\}^\star \mid |\alpha| \text{ е нечетно число}\}.\]
  Тогава езикът 
  \[L_1 = \ov{L} \cap \{ \alpha \in \{a,b\}^\star \mid |\alpha| \text{ е четно число}\}\]
  също е регулярен.
  Ясно е, че $L_1 = \{\alpha\beta \in \{a,b\}^\star\ \mid\ \alpha = \beta\}$.
  Сега можем да разгледаме регулярния език
  \[L_2 = L_1 \cap \L(\mathbf{a^\star b a^\star b}) = \{a^n b a^n b \mid n \in \Nat\}.\]
  За него вече лесно можем да приложим лемата за покачването и да получим, че $L_2$ не е регулярен.
  Така достигаме до противоречие с допускането, че $L$ е регулярен.
\end{hint}

\subsection*{Примери, за които лемата не е  приложима}

\begin{problem}
  \mynote{Например, $\{c\}^+\cdot\{a^nb^n\mid n\in\Nat\}\cup \{a,b\}^\star$}
  Да се даде пример за език $L$, който {\bf не} е регулярен, но $P_{\text{reg}}(L)$.
\end{problem}

\begin{example}
  Езикът $L = \{c^ka^nb^m\mid k,n,m \in \Nat\ \&\ k = 1\implies m = n\}$
  {\bf не} е регулярен, но $P_{\text{reg}}(L)$.
\end{example}
\begin{hint}
  Да допуснем, че $L$ е регулярен.
  Тогава ще следва, че 
  \[L_1 = L\cap ca^\star b^\star = \{ca^nb^n \mid n\in\Nat\}\]
  е регулярен,
  но с лемата за разрастването лесно се вижда, че $L_1$ не е.

  Сега да проверим, че условието за покачване от \Lemma{pumping-reg} е изпълнено за $L$.
  Да изберем константа $p = 2$.
  Сега трябва да разгледаме всички думи $\alpha \in L$, $\abs{\alpha} \geq 2$
  и за всяка $\alpha$ да посочим разбиване $xyz = \alpha$, за което са изпълнени трите свойства от лемата.
  \mynote{Условията за $x,y,z$ са:
    \begin{align*}
      & \abs{xy} \leq 2\\
      & \abs{y} \geq 1\\
      & (\forall i\in\Nat)(xy^iz \in L)
    \end{align*}}

  \begin{itemize}
  \item
    Ако $\alpha = a^n$ или $\alpha = b^n$, $n\geq 2$, то е  очевидно, че можем да
    намерим такова разбиване.
  \item
    $\alpha = a^nb^m$ и $n+m \geq 2$, $n \geq 1$.
    Избираме $x = \varepsilon$, $y = a$, $z = a^{n-1}b^m$.
  \item
    $\alpha = ca^nb^n$, $n\geq 1$.
    Избираме $x = \varepsilon$, $y = c$, $z = a^nb^n$.
  \item
    $\alpha = c^2a^nb^m$. 
    Избираме $x = \varepsilon$, $y = c^2$, $z = a^nb^m$.
  \item
    $\alpha = c^ka^nb^m$, $k \geq 3$.
    Избираме $x = \varepsilon$, $y = c$, $z = c^{k-1}a^nb^m$.
  \end{itemize}
\end{hint}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../eai"
%%% End:
