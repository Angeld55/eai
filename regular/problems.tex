\subsection{Не толкова лесни задачи}

{\bf Това вече е добре да се махне}
\begin{problem}
  Докажете, че няма полиномиален алгоритъм за детерминизация на краен недетерминиран автомат.
\end{problem}
\begin{hint}
  За произволно $n$, разгледайте недетерминирания автомат $\A_n$, за който
  \[(\forall \alpha,\beta \in \{0,1\}^\star)[|\alpha| = |\beta| = n \implies (\alpha\beta \in \L(\A_n) \iff \alpha \neq \beta)].\]
  Този автомат ще има $2n+2$ състояния.

  Допуснете, че за него съществува детерминиран автомат $\D_n$ с $< 2^n$ на брой състояния.
  Разгледайте всички думи с дължина $n$, $\omega_1,\omega_2,\dots,\omega_{2^n}$.
  Приложете принципа на Дирихле и достигнете до противоречие.
\end{hint}


\begin{problem}
  \mynote{\cite[стр. 84]{papadimitriou}}
  При дадени езици $L$, $L'$ над азбуката $\Sigma$, да разгледаме:
  \begin{enumerate}[a)]
  \item
    $\texttt{Pref}(L) = \{\alpha \in \Sigma^\star \mid (\exists \beta \in \Sigma^\star)[\alpha\beta \in L]\}$;
  \item
    $\texttt{NoPref}(L) = \{\alpha \in L \mid \text{ не съществува префикс на $\alpha$ в $L$}\}$;
  \item
    $\texttt{NoExtend}(L) = \{\alpha \in L \mid \text{ $\alpha$ не е префикс на никоя дума от $L$}\}$;
  \item
    $\mbox{Suf}(L) = \{\beta \in \Sigma^\star \mid (\exists \alpha \in \Sigma^\star)[\alpha\beta \in L]\}$;
  \item
    $\text{Infix}(L) = \{\alpha \mid (\exists \beta,\gamma \in \Sigma^\star)[\beta\alpha\gamma \in L]\}$;
  \item 
    $\frac{1}{2}(L) = \{\omega \in \Sigma^\star \mid (\exists \alpha \in \Sigma^\star)[\omega\alpha \in L\ \&\ \abs{\omega} = \abs{\alpha}]\}$;
  \item
    \mynote{right quotient of $L$ by $L'$}
    $L/L' = \{\alpha \in \Sigma^\star \mid (\exists \beta \in L')[\alpha\beta \in L ] \}$;
  \item
    $L^{-1}(L') = \{ \beta \mid (\exists \alpha \in L)[ \alpha\beta \in L']\}$;
  \item
    $\mbox{Max}(L) = \{\alpha \in \Sigma^\star \mid (\forall \beta\in\Sigma^\star)[\beta \neq \varepsilon\implies \alpha\beta \not\in L]\}$.
  \end{enumerate}
  За всички тези езици, докажете, че са регулярни при условие, че $L$ и $L'$ са регулярни.
  \mynote{Тази конструкция няма да бъде ефективна}
  Освен това, докажете, че $L/L'$ е регулярен и при условието, че $L$ е регулярен, но $L'$ е произволен език над азбуката $\Sigma$.
\end{problem}
\begin{hint}
  \begin{enumerate}[a)]
  \item 
    Индукция по дефиницията на регулярен израз.
  \item[в)]
    Най-лесно е да се построи автомат за $\text{Infix}(L)$ като се използва автомата за $L$.
  \item[г)]
    Конструкция с автомат за $L$ и автомат за $L^{\texttt{rev}}$.
  \end{enumerate}
\end{hint}

\begin{problem}
  \mynote{\cite[стр. 75]{kozen}; \cite[стр. 89]{papadimitriou}}
  Да фиксираме азбука само с един символ $\Sigma = \{a\}$.
  Да положим за всяко $p,q\in\Nat$, 
  \[L(p,q) = \{a^k \mid (\exists n\in\Nat)[k = p+q\cdot n]\}.\]
  Ако за един език $L$ съществуват константи $p_1,\dots,p_k$ и $q_1,\dots,q_k$, такива че 
  \[L = \bigcup_{1\leq i \leq k} L(p_i,q_i),\]
  то казваме, че $L$ е {\em породен от аритметични прогресии}.
  \begin{enumerate}[a)]
  \item 
    Докажете, че $L \subseteq \{a\}^\star$ е регулярен език точно тогава, когато $L$ е породен от аритметична прогресия.
  \item
    За произволна азбука $\Sigma$, докажете, че ако $L \subseteq \Sigma^\star$ е регулярен език,
    то езикът $\{a^{\abs{\omega}} \mid \omega \in L\}$  е породен от аритметична прогресия.    
  \end{enumerate}
\end{problem}
\begin{hint}
  \begin{enumerate}[a)]
  \item 
    За едната посока, разгледайте ДКА за $L$.
  \item
    За втората част, разгледайте $h:\Sigma\to\{a\}$ деф. като $(\forall b\in\Sigma)[h(b) = a]$.
    Докажете, че $h$ е поражда хомоморфизъм между $\Sigma^\star$ и $\{a\}^\star$.
    Тогава $h(L) = \{a^{\abs{\omega}} \mid \omega \in L\}$, а
    ние знаем, че регулярните езици са затворени относно хомоморфни образи.  
  \end{enumerate}
\end{hint}

\begin{problem}
  Вярно ли е, че:
  \begin{itemize}
  \item 
    $\{a^m \mid a^{m^2} \in L(p,q)\}$ е регулярен език ?
  \item
    $\{a^m \mid a^{2^m} \in L(p,q)\}$ е регулярен език ?
  \end{itemize}
\end{problem}


\begin{problem}
  За даден език $L$ над азбуката $\Sigma$, да разгледаме езиците:
  \begin{enumerate}[a)]
  \item
    $L' = \{\alpha \in \Sigma^\star \mid (\exists \beta\in\Sigma^\star)[\abs{\alpha} = 2\abs{\beta}\ \&\ \alpha\beta \in L]\}$;
  \item 
    $L'' = \{\alpha \in \Sigma^\star \mid (\exists \beta\in\Sigma^\star)[2\abs{\alpha} = \abs{\beta}\ \&\ \alpha\beta \in L]\}$;
  \item 
    $\frac{1}{3}(L) = \{\alpha \in \Sigma^\star \mid (\exists \beta,\gamma \in \Sigma^\star)[\abs{\alpha} = \abs{\beta} = \abs{\gamma}\ \&\ \alpha\beta\gamma \in L]\}$;
  \item
    $\frac{2}{3}(L) = \{\beta \in \Sigma^\star \mid (\exists \beta,\gamma \in \Sigma^\star)[\abs{\alpha} = \abs{\beta} = \abs{\gamma}\ \&\ \alpha\beta\gamma \in L]\}$;
  \item
    $\frac{3}{3}(L) = \{\gamma \in \Sigma^\star \mid (\exists \beta,\gamma \in \Sigma^\star)[\abs{\alpha} = \abs{\beta} = \abs{\gamma}\ \&\ \alpha\beta\gamma \in L]\}$;
  \item
    $\hat{L} = \{\alpha\gamma \in \Sigma^\star \mid (\exists \beta,\gamma \in \Sigma^\star)[\abs{\alpha} = \abs{\beta} = \abs{\gamma}\ \&\ \alpha\beta\gamma \in L]\}$;
  \item
    $\sqrt{L} = \{\alpha \mid (\exists \beta \in \Sigma^\star)[\abs{\beta} = \abs{\alpha}^2\ \&\ \alpha\beta \in L]\}$;
  \item
    $\log(L) = \{\alpha \mid (\exists \beta \in \Sigma^\star)[\abs{\beta} = 2^{\abs{\alpha}}\ \&\ \alpha\beta \in L]\}$;
  \end{enumerate}
  Проверете ако $L$ е регулярен, то кои от горните езици също са регулярни.
\end{problem}

\begin{problem}
  Да разгледаме езика
  \[L = \{\omega \in \{0,1\}^\star \mid \omega\text{ съдържа равен брой поднизове }01\text{ и }10\}.\]
  Например, $101 \in L$, защото съдържа по веднъж $10$ и $01$.
  $1010 \not\in  L$, защото съдържа два пъти $10$ и само веднъж $01$.
  Докажете, че $L$ е регулярен.
\end{problem}

\begin{problem}
  Нека $L$ е регулярен език над азбуката $\{a,b\}$. Докажете, че следните езици са регулярни:
  \begin{enumerate}[a)]
  \item 
    $\texttt{Diff}_1(L) \df \{\alpha \in L \mid (\exists \beta \in L)[|\alpha| = |\beta|\ \&\ \alpha \text{ се различава от $\beta$ в една позиция}]\}$;
  \item
    $\texttt{Diff}_n(L) \df \{\alpha \in L \mid (\exists \beta \in L)[n \leq |\alpha| = |\beta|\ \&\ \alpha \text{ се различава от $\beta$ в $n$ позиции}]\}$;
  \item
    $\texttt{Diff}(L) \df \{\alpha \in L \mid (\exists \beta \in L)[|\alpha| = |\beta|\ \&\ \alpha \text{ се различава от $\beta$ във всяка  позиция}]\}$;
  \end{enumerate}
\end{problem}
\begin{hint}
  Ако $L = \L(\A)$, то правим декартово произведение на $\A$ плюс флаг дали сме направили грешка.

  Не е ли по-лесно с индукция по построението на регулярните езици ?
\end{hint}


% \begin{problem}
%   \mynote{(\cite{kozen}, стр. 75)}
%   Да фиксираме азбука само с един символ $\Sigma = \{a\}$.
%   Множеството $U$ е {\em породен от аритметична прогресия}, ако съществуват числа $q \geq 0$ и $p > 0$,
%   такива че $(\forall n \geq q)[n \in U\ \iff\ n+p \in U]$.
%   Докажете, че $L \subseteq \{a\}^\star$ е регулярен точно тогава, когато множеството $\{m \mid a^m \in L\}$
%   е породено от аритметична прогресия.
% \end{problem}
% \begin{hint}
%   Разгледайте КДА за $L$.
% \end{hint}

% \begin{hint}
%   \begin{itemize}
%   \item 
%     Докажете, че за всяко $p,q \in \Nat$, $L(p,q)$ е регулярен език.
%   \item
%     Докажете, че за крайно много $p_0,\dots,p_k$, $q_0,\dots,q_k$,
%     $\bigcup_{i \leq k}L(p_i,q_i)$ е регулярен език.
%   \item
%     С индукция по построението на регулярните езици, 
%     докажете, че ако $L$ е регулярен, то $L$ може да се представи
%     като крайно обединение на езици породени от аритметични прогресии.
%     Съществената част от доказателството се състои в следното:
%     \begin{itemize}
%     \item 
%       \mynote{$L(p_1,q_1)\cdot L(p_2,q_2) = L(p_1+p_2,\mbox{НОД}(q_1,q_2))\setminus F$, където $F$ е крайно м-во, и ако $q_1 = q_2$, то $F = \emptyset$}
%       езикът $L(p_1,q_1) \cdot L(p_2,q_2)$ може да се представи като крайно обединение 
%       на езици породени от артиметични прогресии.
%     \item
%       езикът $L(p,q)^\star$ може да се представи като крайно обединение 
%       на езици породени от артиметични прогресии.
%     \end{itemize}
%   \end{itemize}
% \end{hint}



\begin{problem}
  \mynote{Да обърнем внимание, че езикът $\{\alpha\sharp \beta \sharp \gamma \mid \bin{\alpha}+\bin{\beta} = \bin{\gamma}\}$ не е регулярен.}
  Да разгледаме азбуката:
  \[\Sigma_3 = \left\{\begin{bmatrix} 0\\0\\0\end{bmatrix},\begin{bmatrix} 0\\0\\1\end{bmatrix},\begin{bmatrix} 0\\1\\0\end{bmatrix},\begin{bmatrix} 0\\1\\1\end{bmatrix},\dots,\begin{bmatrix} 1\\1\\1\end{bmatrix}\right\}.\]
  Докажете, че 
  $L = \left\{\begin{bmatrix} \alpha\\\beta\\\gamma\end{bmatrix} \in \Sigma^\star_3 \mid \bin{\alpha}+\bin{\beta} = \bin{\gamma}\right\}$
  е автоматен език.
\end{problem}
\ifhints
\begin{hint}
  Доста по-удобно е да построим автомат $\A$, такъв че $\L(\A) = L^{\texttt{rev}}$.
  Да започнем с състоянието $q_{\scriptscriptstyle{=}}$, за което искаме да имаме свойството, че за произволно състояние $q$,
  \[\delta^\star(q, \tiny{ \begin{bmatrix} \alpha\\ \beta \\ \gamma\end{bmatrix} }) = q_{\scriptscriptstyle{=}}  \iff \bin{\alpha^{\rev}} + \bin{\beta^{\rev}} = \bin{\gamma^{\rev}}.\]
  Понеже за $\bin{\varepsilon} + \bin{\varepsilon} = \bin{\varepsilon}$, състоянието $q_{\scriptscriptstyle{=}}$ ще бъде начално и финално за $\A$.

  Нека $\bin{\alpha}+\bin{\beta} = \bin{\gamma}$. Тогава:
  \begin{align*}
    & \delta(q_{\scriptscriptstyle{=}},\tiny{ \begin{bmatrix} 0\\ 0 \\ 0\end{bmatrix} }) \df q_{\scriptscriptstyle{=}} & \comment\text{ защото }\bin{0\alpha} + \bin{0\beta} = \bin{0\gamma}\\
    & \delta(q_{\scriptscriptstyle{=}},\tiny{ \begin{bmatrix} 0\\ 1 \\ 1\end{bmatrix} }) \df q_{\scriptscriptstyle{=}} & \comment\text{ защото }\bin{0\alpha} + \bin{1\beta} = \bin{1\gamma}\\
    & \delta(q_{\scriptscriptstyle{=}},\tiny{ \begin{bmatrix} 1\\ 0 \\ 1\end{bmatrix} }) = q_{\scriptscriptstyle{=}} & \comment\text{ защото }\bin{1\alpha} + \bin{0\beta} = \bin{1\gamma}
  \end{align*}
  Остана случая $\bin{1\alpha} + \bin{1\beta} = \bin{10\gamma}$. Този случай е по-специален и трябва да бъде разгледан отделно.
  Трябва да отидем в състояние $q_1$, в което ще помним, че третия ред трябва да започва с $1$-ца. Затова имаме следния преход:
  \[\delta(q_{\scriptscriptstyle{=}},\tiny{ \begin{bmatrix} 1\\ 1 \\ 0\end{bmatrix} }) \df q_1.\]
  
  За останалите $\gamma \in \Sigma_3$ имаме, че
  \[\delta(q_{\scriptscriptstyle{=}},\gamma) \df q_{\texttt{err}},\]
  където $q_{\texttt{err}}$ е състоянието, от което не можем да излезем.
  
  Така трябва да дефинираме функцията на преходите, че за състоянието $q_1$ трябва да е изпълнено, че за произволно $q$,
  \[\delta^\star(q, \tiny{ \begin{bmatrix} \alpha\\ \beta \\ \gamma\end{bmatrix} }) = q_{\scriptscriptstyle{1}}  \iff \bin{\alpha^{\rev}} + \bin{\beta^{\rev}} = \bin{1\gamma^{\rev}}.\]
  Да разгледаме сега случая $\bin{\alpha} + \bin{\beta} = \bin{1\gamma}$. Тогава:
  \begin{align*}
    & \delta(q_1,\tiny{ \begin{bmatrix} 0\\ 0 \\ 1\end{bmatrix} }) \df q_{\scriptscriptstyle{=}} & \comment\text{ защото }\bin{0\alpha} + \bin{0\beta} = \bin{1\gamma}\\
    & \delta(q_1,\tiny{ \begin{bmatrix} 1\\ 1 \\ 1\end{bmatrix} }) \df q_{1} & \comment\text{ защото }\bin{1\alpha} + \bin{1\beta} = \bin{11\gamma}\\
    & \delta(q_1,\tiny{ \begin{bmatrix} 1\\ 0 \\ 0\end{bmatrix} }) \df q_{1} & \comment\text{ защото }\bin{1\alpha} + \bin{0\beta} = \bin{10\gamma}\\
    & \delta(q_1,\tiny{ \begin{bmatrix} 0\\ 1 \\ 0\end{bmatrix} }) \df q_{1} & \comment\text{ защото }\bin{0\alpha} + \bin{1\beta} = \bin{10\gamma}\\
    & \delta(q_1, \gamma) \df q_{\texttt{err}} & \comment\text{ за останалите }\gamma \in \Sigma_3
  \end{align*}
\end{hint}
\fi

\begin{problem}
  Да разгледаме азбуката:
  \[\Sigma_2 = \left\{\begin{bmatrix} 0\\0\end{bmatrix},\begin{bmatrix} 0\\1\end{bmatrix},\begin{bmatrix} 1\\0\end{bmatrix},\begin{bmatrix} 1\\1\end{bmatrix}\right\}.\]
  Една дума над азбуката $\Sigma_2$ ни дава два реда от $0$-ли и $1$-ци, които ще разглеждаме като числа в двоична бройна система.
  Да разгледаме езиците:
  \begin{itemize}
  \item 
    $L_1 = \left\{\begin{bmatrix} \alpha\\ \beta \end{bmatrix} \in \Sigma^\star_2 \mid \ov{\alpha}_{(2)} < \ov{\beta}_{(2)}\right\}$;
  \item
    $L_2 = \left\{\begin{bmatrix} \alpha\\ \beta \end{bmatrix} \in \Sigma^\star_2 \mid 3(\ov{\alpha}_{(2)}) = \ov{\beta}_{(2)}\right\}$;
  \item
    $L_3 = \left\{\begin{bmatrix} \alpha\\ \beta \end{bmatrix} \in \Sigma^\star_2 \mid \alpha = \beta^{\rev}\right\}$;
  \end{itemize}
  Докажете, че  $L_1$ и $L_2$ са автоматни, а $L_3$ не е автоматен.
\end{problem}
\ifhints
\begin{hint}
  Ще построим автомат $\A = \FA$ за езика $L^{\rev}_1$.
  За улеснение, в рамките на тази задача ще пишем:
  \begin{itemize}
  \item 
    $\alpha \equiv \beta$, ако $\ov{\alpha^{\rev}}_{(2)} = \ov{\beta^{\rev}}_{(2)}$,
  \item
    $\alpha \prec \beta$, ако $\ov{\alpha^{\rev}}_{(2)} < \ov{\beta^{\rev}}_{(2)}$,
  \item
    $\alpha \succ \beta$, ако $\ov{\alpha^{\rev}}_{(2)} > \ov{\beta^{\rev}}_{(2)}$.
  \end{itemize}
  Нека състоянията на автомата са $Q = \{q_{\scriptscriptstyle{=}},q_{\scriptscriptstyle{<}},q_{\scriptscriptstyle{>}}\}$.
  Искаме да е изпълнено свойствата:
  \begin{itemize}
  \item 
    $\delta^\star(q_{\scriptscriptstyle{=}}, \scriptsize{\begin{bmatrix} \alpha\\ \beta\end{bmatrix}}) = q_{\scriptscriptstyle{=}}$ точно тогава, когато $\alpha \equiv \beta$;
  \item 
    $\delta^\star(q_{\scriptscriptstyle{=}}, \scriptsize{\begin{bmatrix} \alpha\\ \beta\end{bmatrix}}) = q_{\scriptscriptstyle{<}}$ точно тогава, когато $\alpha \prec \beta$;
  \item 
    $\delta^\star(q_{\scriptscriptstyle{=}}, \scriptsize{\begin{bmatrix} \alpha\\ \beta\end{bmatrix}}) = q_{\scriptscriptstyle{>}}$ точно тогава, когато $\alpha \succ \beta$.
  \end{itemize}
  Множеството от финални състояния ще бъде $F = \{q_{\scriptscriptstyle{<}}\}$, а началното състояние $\qstart = q_{\scriptscriptstyle{=}}$.
  За да дефинираме функцията на преходите, трябва да разгледа няколко случая, в зависимост от това какво е отношението между $\alpha$ и $\beta$.
  \begin{itemize}
  \item
    Нека $\alpha \equiv \beta$. Тогава:  
    \begin{itemize}
    \item 
      $\alpha 0 \equiv \beta 0$ и $\alpha 1 \equiv \beta 1$. Следователно,
      \[\delta(q_{\scriptscriptstyle{=}},\scriptsize{\begin{bmatrix} 0\\0\end{bmatrix}}) = \delta(q_{\scriptscriptstyle{=}},\scriptsize{\begin{bmatrix} 1\\1\end{bmatrix}}) = q_{\scriptscriptstyle{=}}.\]
    \item
      $\alpha 0 \prec \beta 1$. Следователно,
      \[\delta(q_{\scriptscriptstyle{=}},\scriptsize{\begin{bmatrix} 0\\1\end{bmatrix}}) = q_{\scriptscriptstyle{>}}.\]
    \item
      $\alpha 1 \succ \beta 0$. Следователно,
      \[\delta(q_{\scriptscriptstyle{=}},\scriptsize{\begin{bmatrix} 1\\0\end{bmatrix}}) = q_{\scriptscriptstyle{<}}.\]
    \end{itemize}
  \item 
    Нека $\alpha \prec \beta$. Тогава:
    \begin{itemize}
    \item 
      $\alpha 0 \prec \beta 0$, $\alpha 1 \prec \beta 1$, $\alpha 0 \prec \beta 1$. Следователно,
      \[\delta(q_{\scriptscriptstyle{<}},\scriptsize{\begin{bmatrix} 0\\0\end{bmatrix}}) = \delta(q_{\scriptscriptstyle{<}},\scriptsize{\begin{bmatrix} 1\\1\end{bmatrix}}) = \delta(q_{\scriptscriptstyle{<}},\scriptsize{\begin{bmatrix} 0\\1\end{bmatrix}}) = q_{\scriptscriptstyle{<}}.\]
    \item
      $\alpha 1 \succ \beta 0$. Следователно,
      \[\delta(q_{\scriptscriptstyle{<}},\scriptsize{\begin{bmatrix} 1\\0\end{bmatrix}}) = q_{\scriptscriptstyle{>}}.\]
    \end{itemize}
  \item
    Нека $\alpha \succ \beta$. Тогава:
    \begin{itemize}
    \item 
      $\alpha 0 \succ \beta 0$, $\alpha 1 \succ \beta 1$, $\alpha 1 \succ \beta 0$. Следователно,
      \[\delta(q_{\scriptscriptstyle{>}},\scriptsize{\begin{bmatrix} 0\\0\end{bmatrix}}) = \delta(q_{\scriptscriptstyle{>}},\scriptsize{\begin{bmatrix} 1\\1\end{bmatrix}}) = \delta(q_{\scriptscriptstyle{>}},\scriptsize{\begin{bmatrix} 1\\0\end{bmatrix}}) = q_{\scriptscriptstyle{>}}.\]
    \item
      $\alpha 0 \prec \beta 1$. Следователно,
      \[\delta(q_{\scriptscriptstyle{>}},\scriptsize{\begin{bmatrix} 0\\1\end{bmatrix}}) = q_{\scriptscriptstyle{<}}.\]
    \end{itemize}
  \end{itemize}
  Докажете, че за така дефинирания автомат $\A$, $\L(\A) = L^{\texttt{rev}}_1$.
\end{hint}
\fi


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../eai"
%%% End:
