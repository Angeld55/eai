\section{Метод на Бжозовски}\label{sect:regular:brzozowski}
\index{Бжозовски}

Имаме следната операция за произволна буква $a$,
\[a^{-1}(L) \df \{\omega \in \Sigma^\star \mid a\omega \in L\}.\]
Аналогично, за произволна дума $\alpha$,
\[\alpha^{-1}(L) \df \{\omega \in \Sigma^\star \mid \alpha\omega \in L\}.\]

\begin{problem}
  Докажете, че:
  \begin{enumerate}[(1)]
  \item
    $a^{-1}(L_1 \cup L_2) = a^{-1}(L_1) \cup a^{-1}(L_2)$;
  \item
    $a^{-1}(L_1 \cap L_2) = a^{-1}(L_1) \cap a^{-1}(L_2)$;
  \item
    $a^{-1}(L_1 \setminus L_2) = a^{-1}(L_1) \setminus a^{-1}(L_2)$;
  \item
    $a^{-1}(L_1 \cdot L_2) =
    \begin{cases}
      a^{-1}(L_1) \cdot L_2, & \text{ ако }\varepsilon\not\in L_1\\
      a^{-1}(L_1) \cdot L_2 \cup L_2, & \text{ ако }\varepsilon\in L_1
    \end{cases}$
  \item
    $a^{-1}(L^\star) = a^{-1}(L) \cdot L^\star$.
  \end{enumerate}
\end{problem}


\marginpar{Бжозовски \cite{brzozowski-derivatives} описва алгоритъм за строене на автомат по регулярен израз.}

Да видим как можем директно да построим минимален тотален краен детерминиран автомат $\A$
разпознаващ регулярен език $L$, където \[\B = \pair{Q,\Sigma,\qstart,\delta,F}.\]
Конструкцията на автомата $\B$ е следната:
\begin{itemize}
\item
  Състоянията $Q$ ще бъдат от вида $q_M$, за $M \subseteq \Sigma^\star$, където:
  \[Q \df \{q_M \mid (\exists \alpha\in\Sigma^\star)[M = \alpha^{-1}(L)].\]
\item
  $\qstart \df q_L$.
\item
  За произволни езици $M$ и $N$ и буква $a$,
  \[\delta(q_M,a) \df q_N \stackrel{\text{деф}}{\iff} N = a^{-1}(M).\]
\item
  \marginpar{Да напомним, че имаме свойството
  \[\alpha \in L \iff \varepsilon \in \alpha^{-1}(L).\]}
  Сега е ясно, че състоянията $Q$ са точно тези състояния $q_M$, които са достижими от началното състояние $q_L$, т.е.
  \[Q = \{q_M \mid (\exists \alpha \in \Sigma^\star)[\delta(q_L,\alpha) = q_M].\]
\item
  $F \df \{ q_M \mid \varepsilon \in M\}$.
\end{itemize}

\begin{problem}
  Докажете, че за всяка дума $\alpha$ и всяко $q_M \in Q$,
  \[N = \alpha^{-1}(M) \iff \delta^\star(q_M,\alpha) = q_N.\]
\end{problem}

\begin{problem}
  Докажете, че $L = \L(\B)$.
\end{problem}
\begin{hint}
  Съобразете, че имаме следните еквивалентности:
  \begin{align*}
    \alpha \in L & \iff \varepsilon\in\alpha^{-1}(L)\\
                 & \iff \varepsilon\in M\ \&\ q_M = \delta^\star(q_L,\alpha) & \comment{M = \alpha^{-1}(L)}\\
                 & \iff \delta^\star(\qstart,\alpha) \in F. & \comment{\qstart = q_L}
  \end{align*}
\end{hint}


\input{regular/brzozowski-solved-examples}

Нека имаме КДА $\A$.
Дефинираме $\B = \rev(\A)$ да бъде КДА по следния начин:
\begin{itemize}
\item
  Състоянията на $\B$ ще бъдат подмножества на състоянията на $\A$.

\item
  Да положим $Q_\alpha \df \{q \in Q^\A \mid \delta^\star_\A(q,\alpha) \in F\}$.
  Тогава
  $Q^\B \df \{Q_\alpha \mid \alpha \in \Sigma\}$.
\item
  $\qstart^\B \df F^\A = Q_\varepsilon$.
\item
  За произволно $R \in Q^\B$,
  $\delta_\B(R,a) \df \{q \in Q^\A \mid \delta_\A(q,a) \in R\}$.
  С други думи,
  $\delta_\B(Q_\alpha,a) = Q_{a\alpha}$.
\item
  $F^\B = \{Q_\alpha \mid \qstart^\A \in Q_\alpha\}$.
\item
  Съобразете, че $\delta^\star_\B(Q_\alpha,\gamma) = Q_{\gamma^\rev\alpha}$.
  Тогава
  \begin{align*}
    \L(\B) & = \{\alpha \mid \delta^\star_\B(Q_\varepsilon,\alpha) = Q_{\alpha^\rev} \in F^\B\}\\
           & = \{\alpha \mid  \qstart^\A \in Q_{\alpha^\rev}\}\\
           & = \{\alpha \mid  \delta^\star(\qstart^\A,\alpha^\rev) \in F^\A\}\\
           & = \L(\A)^\rev.
  \end{align*}
\end{itemize}

\begin{problem}
  Докажете, че $\rev(\A)$ е минимален автомат за $\L(\A)^\rev$.
\end{problem}
\begin{hint}
  Достатъчно е да се докаже, че
  \[Q_\alpha = Q_\beta \iff \L_\B(Q_\alpha) = \L_\B(Q_\beta).\]
  Нека $\L_\B(Q_\alpha) = \L_\B(Q_\beta)$. Ще докажем, че $Q_\alpha \subseteq Q_\beta$.
  Нека $q \in Q_\alpha$. Това означава, че $\delta^\star_\A(q,\alpha) \in F^\A$.
  Следователно, съществува $\gamma$, за която $\delta^\star_\A(\qstart^\A,\gamma\alpha) \in F^\A$.
  От друга страна,
  \begin{align*}
    \gamma^\rev \in \L_\B(Q_\alpha) & \iff \delta^\star_\B(Q_\alpha,\gamma^\rev) \in F^\B\\
                                    & \iff Q_{\gamma\alpha} \in F^\B\\
                                    & \iff \delta^\star_\A(\qstart^\A,\gamma\alpha) \in F^\A.
  \end{align*}
\end{hint}


\begin{framed}
  \begin{theorem}[Бжозовски]
    Нека $\A$ е КДА. Тогава $\rev(\rev(\A))$ е минимален автомат за $\L(\A)$.
  \end{theorem}
\end{framed}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../eai"
%%% End:
