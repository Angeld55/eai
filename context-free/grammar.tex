\section{Безконтекстни граматики}

\index{граматика!безконтекстна}
\mynote{В \cite{papadimitriou} дефиницията е различна. Там $\Sigma \subseteq V$. На англ. {\em context-free grammar}. Други срещани наименования на български са {\em контекстно-свободна}, {\em контекстно-независима}.}

В Раздел \ref{sect:regular-grammar} въведохме понятието граматика. След това видяхме как можем да опишем регулярните езици
със специален вид граматики, които нарекохме регулярни граматики.
Сега ще разгледаме още един вид граматики, които описват по-широк клас от езици.

\begin{itemize}
\item 
  Една граматика $G = (V, \Sigma, R, S)$ се нарича {\bf безконтекстна}, ако 
  имаме ограничението, че $R \subseteq V\times (V\cup\Sigma)^\star$.
\item
  \index{език!безконтекстен}
  $L$ се нарича {\bf безконтекстен език}, ако съществува безконтекстна граматика $G$, за която 
  $L = \L(G) = \{\omega \in \Sigma^\star \mid S \derive{\star} \omega\}$.
\end{itemize}

\begin{remark}
  Очевидно е, че всяка регулярна граматика е безконтекстна. Следователно, 
  {\em всеки регулярен език е безконтекстен.}
\end{remark}

Като първи пример нека да видим, че това включване е {\em строго}, т.е. съществува безконтекстен език, който не е регулярен.
Да напомним, че вече видяхме, че езикът $L = \{a^nb^n \mid n\in\Nat\}$ не е регулярен.

\begin{example}
  Да разгледаме безконтекстната граматика $G$ зададена със следните правила:
  \begin{align*}
    & S \to aSb \mid \varepsilon.
  \end{align*}
  Лесно се съобразява, че $\L(G) = \{a^nb^n \mid n\in\Nat\}$.
\end{example}

\begin{example}
  Да разгледаме безконтекстната граматика $G$ зададена със следните правила:
  \begin{align*}
    & S \to aSc\ |\  B\\
    & B \to bBc\ |\ \varepsilon.
  \end{align*}
  Лесно се съобразява, че $\L(G) = \{a^nb^kc^{n+k} \mid n,k\in\Nat\}$.
\end{example}

\begin{example}
  Да разгледаме граматика с правила
  \begin{align*}
    & S \to S + S\ |\ S * S\ |\ (S)\ |\ V\\
    & V \to x\ |\ y\ |\ z
  \end{align*}

  Думата $x * y + z$ има две различни дървета на извод.

  \begin{framed}
    \qtreecenterfalse
    \Tree [.$S$ [.$S$ [.$V$ $x$ ] ] $*$ [.$S$ [.$S$ [.$V$ $y$ ] ] $+$ [.$S$ [.$V$ $z$ ] ] ] ]
    \hskip 0.4in
    \Tree [.$S$ [.$S$ [.$S$ [.$V$ $x$ ] ] $*$ [.$S$ [.$V$ $y$ ] ] ]  $+$  [.$S$ [.$V$ $z$ ] ] ]
  \end{framed}
  
  
  Да разгледаме граматика с правила
  \begin{align*}
    & S \to E + S\ |\ E\\
    & E \to V * E\ |\ V\ |\ (S) * E\ |\ (S)\\
    & V \to x\ |\ y\ |\ z
  \end{align*}
  Сега думата $x * y + z$ има само едно дърво на извод.

  \begin{framed}
    \Tree [.$S$ [.$E$ [.$V$ $x$ ] $*$ [.$E$ [.$V$ $y$ ] ] ] $+$ [.$S$ [.$E$ [.$V$ $z$ ] ] ] ]
  \end{framed}
\end{example}

\begin{example}
  \begin{align*}
    & S \to \texttt{if } S \texttt{ then } S \texttt{ else }S\ |\ \texttt{ if }S \texttt{ then }S\ |\ V\\
    & V \to x\ |\ y\ |\ z
  \end{align*}

  Ние искаме следната граматика:
  \begin{align*}
    & S \to M\ |\ U\\
    & M \to \texttt{if } S \texttt{ then } M \texttt{ else }M\ |\ X\\
    & U \to \texttt{if } S \texttt{ then } S\ |\ \texttt{if } S \texttt{ then } M \texttt{ else }U
  \end{align*}
\end{example}

\begin{example}
  Да разгледаме граматика с правила
  \begin{align*}
    & S \to E\\
    & E \to E + P\ |\ P\\
    & P \to P * N\ |\ N\\
    & N \to (E)\ |\ a.
  \end{align*}
\end{example}

\begin{framed}
  \begin{thm}
    Всеки регулярен език е безконтекстен.
  \end{thm}
\end{framed}
\begin{proof}
  Ще направим индукция по построението на регулярните езици.
  \begin{itemize}
  \item
    Всеки от езиците $\emptyset$, $\{\varepsilon\}$ и $\{a\}$, за всяка буква $a \in \Sigma$ е безконтекстен.
  \item
    Нека $L_1$ и $L_2$ са безконтекстни езици. Тогава:
    \begin{itemize}
    \item
      $L_1 \cup L_2$ е безконтекстен език.
    \item
      $L_1 \cdot L_2$ е безконтекстен език.
    \item
      $L^\star_1$ е безконтекстен език.
    \end{itemize}
  \end{itemize}
\end{proof}


% \begin{proposition}
%   \label{pr:grammar:concat}
%   Ако $\alpha_1 \derive{n_1} \beta_1, \dots, \alpha_k \derive{n_k} \beta_k$, тогава
%   \[\alpha_1\cdots\alpha_k \derive{n} \beta_1\cdots\beta_k,\]
%   където $n = \sum^k_{i=1} n_i$.
% \end{proposition}
% \begin{proof}
%   Индукция по $k \geq 1$.
%   \begin{itemize}
%   \item
%     За $k = 1$ е очевидно. В този случай $n_1 = n$.
%   \item
%    Нека $k > 1$. Тогава от И.П. за $k-1$ имаме, че
%    $\alpha_1\cdots\alpha_{k-1} \derive{n'} \beta_1\cdots\beta_{k-1}$ и $n' = \sum^{k-1}_{i=1} n_i$.
%    От \Proposition{grammar:add} имаме, че
%    \[\alpha_1\cdots\alpha_{k-1}\alpha_{k} \derive{n'} \beta_1\cdots\beta_{k-1}\alpha_k.\]
%    Понеже $\alpha_k \derive{n_k} \beta_k$, отново от \Proposition{grammar:add} получаваме, че
%    \[\beta_1\cdots\beta_{k-1}\alpha_k \derive{n_k} \beta_1 \cdots \beta_{k-1}\beta_k.\]
%    Сега обединяваме двата извода и получаваме, че
%    \[\alpha_1\cdots\alpha_{k} \derive{n} \beta_1\cdots\beta_k,\]
%    където $n = \sum^k_{i=1} n_i$.
%   \end{itemize}
% \end{proof}

% \begin{framed}
  \begin{proposition}
    \label{pr:grammar:divide}
    Нека $G$ е безконтекстна граматика и нека $X_1\cdots X_k \derive{n}_G \beta$, където $X_i \in V \cup \Sigma$.
    Тогава съществуват думи $\beta_1,\dots,\beta_k$, такива че за $i = 1,\dots, k$ е изпълнено, че
    $X_i \derive{n_i} \beta_i$, където $\beta = \beta_1\cdots \beta_k$ и $n = \sum^k_{i = 1}n_i$.
  \end{proposition}
% \end{framed}
% \begin{proof}
%   Индукция по $n$.
%   \begin{itemize}
%   \item
%     Нека $n = 0$. Тогава $\beta = \alpha_1 \cdots \alpha_k$ и е ясно, че в този случай $\beta_i = \alpha_i$ и $n_i = 0$.
%   \item
%     Нека $n > 0$ и $\alpha_1\cdots \alpha_k \derive{n} \beta$. Тогава за някое $i$, $\alpha_i \to_G \alpha'_i$ и
%     като приложим \Proposition{grammar:add} получаваме, че
%     \[\alpha_1\cdots\alpha_i\cdots\alpha_k \to_G \alpha_1\cdots\alpha'_i\cdots\alpha_k.\]
%     Според дефиницията на релацията $\derive{n}$ имаме, че
%     \[\alpha_1\cdots\alpha'_i\cdots\alpha_k \stackrel{n-1}{\to}_G \beta.\]
%     От И.П. получаваме, че съществуват думи $\beta_1,\dots,\beta_k$, такива че $\beta = \beta_1 \cdots \beta_k$
%     и $\alpha_j \derive{n_j} \beta_j$ за $j \neq i$ и $\alpha'_i \derive{n'_i} \beta_i$, като
%     \[n-1 = n'_i + \sum_{j\neq i} n_j.\]
%     Понеже имаме, че $\alpha_i \to_G \alpha'_i \derive{n'_i}\beta_i$,
%     то е ясно, че за $n_i = n'_i + 1$ имаме $\alpha_i \derive{n_i} \beta_i$ и
%     \[n = \sum^{k}_{i=1} n_i.\]
%   \end{itemize}
% \end{proof}




%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "../eai"
%%% End: 
