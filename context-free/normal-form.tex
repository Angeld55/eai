\subsection{Нормална Форма на Чомски}
\index{Чомски}
%[стр. 99 от \cite{sipser}]
\index{нормална форма на Чомски}
Една безконтекстна граматика е в {\bf нормална форма на Чомски}, ако
всяко правило е от вида
\[A \rightarrow BC\mbox{ и }A \rightarrow a,\]
като $A, B, C$.
\mynote{Ако искаме $\varepsilon$ да бъде в езика на граматиката, то добавяме нова начална променлива $S_0$ и правило $S_0 \to_G \varepsilon$.}
% Освен това, позволяваме правилото $S\to\varepsilon$.
% \footnote{В \cite[стр. 151]{papadimitriou} дефиницията е малко по-различна.
% Там дефинират $G$ да бъде в нормална форма на Чомски ако $R \subseteq V\times(V\cup\Sigma)^2$.
% В този случай губим езиците $\{\varepsilon\}$ и $\{a\}$, за $a\in\Sigma$.}

\begin{framed}
  \begin{theorem}
    Всеки безконтекстен език $L$, който не съдържа $\varepsilon$, се поражда от безконтекстна граматика в нормална форма на Чомски.
  \end{theorem}
\end{framed}
\begin{proof}
%  \marginpar{Броят на правилата може да се увеличи експоненциално.}
  Нека имаме безконтекстна граматика $G$, за която $L = \L(G)$.
  Ще построим безконтекстна граматика $G^\prime$ в нормална форма на Чомски, $L = \L(G^\prime)$.
  % [стр. 99 от \cite{sipser}]
  Следваме следната процедура:
  \begin{itemize}
  % \item
  %   Добавяме нов начален символ $S_0$ и правило $S_0 \to S$.
  \item
    Премахваме дългите правила.
    Това можем да направим за време $\mathcal{O}(|G|)$
    като новата граматика ще има дължина $\mathcal{O}(|G|)$.
  \item
    \mynote{Важно е, че преди това сме премахнали дългите правила. Вижте \cite[стр. 296]{hopcroft2}.}
    Премахваме $\varepsilon$-правилата.
    Това можем да направим за време $\mathcal{O}(|G|^2)$
    като новата граматика ще има дължина $\mathcal{O}(|G|)$.
  \item
    Премахваме преименуващите правила.
    Това можем да направим за време $\mathcal{O}(|G|^2)$
    като новата граматика ще има дължина $\mathcal{O}(|G|^2)$.
  \item
    За правила от вида $A\to u_1 u_2$, където $u_1, u_2 \in V \cup \Sigma$, 
    заменяме всяка буква $u_i$ с новата променлива $U_i$
    и добавяме правилото $U_i\to u_i$.
    Например, правилото $A \to aB$ се заменя с правилото $A \to XB$ и добавяме правилото $X \to a$,
    където $X$ е нова променлива.
    Това можем да направим за време $\mathcal{O}(|G|)$ и новата граматика ще има дължина $\mathcal{O}(|G|)$.
  \item
    Ако искаме $\varepsilon$ да бъде в езика на граматиката, то добавяме нова начална променлива $S_0$
    и правило $S_0 \to_G \varepsilon$.
  \end{itemize}
\end{proof}

\begin{theorem}
  При дадена безконтекстна граматика $G$, можем да намерим еквивалентна
  на нея граматика $G'$ в нормална форма на Чомски за време $\mathcal{O}(|G|^2)$,
  като получената граматика е с дължина $\mathcal{O}(|G|^2)$.
\end{theorem}

\begin{theorem}
  \mynote{\cite[стр. 137]{hopcroft1}. Важно е, че алгоритмите са полиномиални. От \Lemma{pumping-context} имаме експоненциални алгоритми.}
  Съществуват \emph{полиномиални} алгоритми, които определят по дадена безконтекстна граматика $G$ дали:
  \begin{enumerate}[a)]
  \item
    $\abs{\L(G)} < \infty$;
  \item
    $\abs{\L(G)} = \infty$.
  \end{enumerate}
\end{theorem}
\begin{proof}
  Нека е дадена една безконтекстна граматика $G$.
  Нека да разгледаме граматиката $G'$ в НФЧ {\em без безполезни променливи}, за която $\L(G) = \L(G')$.
  От граматиката $G' = \pair{V',\Sigma,S,R'}$ строим граф с възли променливите от $V'$ като
  за $A,B \in V'$ имаме ребро $A \to B$ точно тогава, когато съществува $C \in V'$,
  за което $A \to BC$ или $A \to CB$ е правило в $R'$.
  Сега ще съобразим, че ако в получения граф имаме цикъл, то $\L(G') = \infty$.

  Да разгледаме един такъв цикъл в графа:
  \[A_0 \to A_1 \to A_2 \to \cdots \to A_n \to A_0.\]
  Това означава, че 
  \[A_0 \derive{1}_G \alpha_1 A_1 \beta_1 \derive{1}_G \alpha_2 A_2 \beta_2 \derive{1}_G \cdots \derive{1}_G \alpha_n A_n \beta_n \derive{1}_G \alpha_{n+1} A_0 \beta_{n+1}.\]
  Понеже граматиката е в НФЧ имаме, че $|\alpha_i\beta_i| = i$.
  Понеже няма безполезни символи в граматика и тя е в НФЧ следва, че съществуват думи $\omega,\rho \in \Sigma^\star$, за които $\alpha_{n+1} \derive{\star} \omega$ и $\beta_{n+1} \derive{\star} \rho$,
  където $|\omega\rho| \geq n+1$, защото $|\alpha_{n+1}\beta_{n+1}| = n+1$.
  Понеже няма безполезни символи в граматиката, то съществуват $\delta, \gamma \in \Sigma^\star$, за които
  $S \derive{\star} \delta  A_0 \gamma$. Получаваме:
  \[ S \derive{\star}_G \delta A_0 \gamma \derive{\star}_G \delta \alpha_{n+1} A_0 \beta_{n+1} \gamma \derive{\star}_G \delta \omega A_0 \rho\gamma \derive{\star}_G \cdots \derive{\star}_G \delta \omega^i A_0 \rho^i \gamma \derive{\star}_G \delta\omega^i\alpha\rho^i\gamma,\]
  където $A_0 \derive{\star}_G \alpha$, за някое $\alpha \in \Sigma^\star$.

  Ако в графът няма цикли, то езикът $\L(G)$ е краен, защото ако от променливата $A$ най-дългият път има дължина $k+1$,
  то за променливите $B$ и $C$, за които имаме правилото $A\to BC$, най-дългият път от $B$ и $C$ има дължина най-много $k$.

  Ако най-дългият път от $A$ има дължина $k$, то всяко дърво на извод $P$, за което $\texttt{root}(P) = A$ и $\texttt{yield}(P) \in \Sigma^\star$,
  е такова, че $\texttt{height}(P) \leq k$. От \Corollary{tree:upper-bound} следва, че всички думи, които се извеждат от $A$ са най-много $2^{k}$ на брой,
  защото всяко такова дърво на извод е двоично и $\texttt{yield}(P) \leq 2^k$.
\end{proof}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../eai"
%%% End:
