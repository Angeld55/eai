\section{Допълнителни задачи}

\input{context-free/equal-number-parentheses}
\input{context-free/balanced-parentheses}
\input{context-free/easy-problems}

\begin{problem}
  Докажете, че езикът $L = \{a^nb^{kn} \mid k,n > 0\}$ не е безконтекстен.
\end{problem}
\ifhints
\begin{hint}
  Да разгледаме ситуацията $\alpha \in L$ и
  $\alpha = xyuvw$, където $y = a^i$ и $v = b^j$
  Интересният случай е когато $0 < i,j < p$.
  \begin{itemize}
  \item 
    Нека $i = j$.
    Разглеждаме думата $xy^{p^2+1}uv^{p^2+1}w$.
    Това означава дали $p+p^2i$ дели $p^2+p^2i$, т.е.
    дали $1 + pi$ дели $p+pi$.
    \begin{align*}
      & p + pi = k(1+pi), \text{ за някое }1 \leq k < p\\
      & p = k + pi(k-1), \text{ за някое }1 \leq k < p\\
    \end{align*}
    Достигаме до противоречие.
  \item
    Нека $i > j$, т.е. $i \geq j+1$.
    Отново разглеждаме думата $xy^{p^2+1}uv^{p^2+1}w$.
    Това означава дали $p+p^2i$ дели $p^2+p^2j$, т.е.
    дали $1 + pi$ дели $p+pj$, но
    $1+pi \geq 1 + p(j+1) > p + pj$.
    Противоречие.
  \item
    Нека $i < j$ и тогава нека $j = mi + r$, където $p > i > r \geq 0$
    Разглеждаме думата $xy^{mp^2+1}uv^{mp^2+1}w$.
    Това означава дали $p+mp^2i$ дели $p^2+mp^2j$, т.е.
    дали $1 + mpi$ дели $p+mpj$.
    \[p+pmj = k(1+pmi), \text{ за някое }1 \leq k.\]
    \begin{itemize}
    \item 
      Възможно ли е $k \geq p$? Тогава:
      \begin{align*}
        & p + pmj = k(1+pmi) \geq p(1+pmi) \geq p(1+pj)\\
        & p(1+mj) \geq p(1+pj)\\
        & m \geq p.
      \end{align*}
      Достигаме до противоречие.
      Следователно, $1 \leq k < p$.
    \item
      Възможно ли е $k \leq m$? Тогава:
      \begin{align*}
        & p + pmj = k(1+pmi) \leq m(1+pmi) \leq m(1+pj)\\
        & p(1+mj) \leq m(1+pj)\\
        & p + pmj \leq m + pmj\\
        & p \leq m.
      \end{align*}
      Достигаме до противоречие, защото $m < p$.
    \item
      Заключаваме, че $1 \leq m < k < p$. Тогава:
      \begin{align*}
        & p + pmj = k(1+pmi)\\
        & p = k + pm(ki-j).
      \end{align*}
      Понеже $m < k$, то $j < (m+1)i \leq ki$,
      т.е. $ki-j > 0$. Достигаме до противоречие.
    \end{itemize}
  \end{itemize}
\end{hint}
\fi

За всеки две думи с равна дължина, дефинираме функцията $\texttt{diff}$ по следния начин:
\begin{align*}
  & \texttt{diff}(\varepsilon,\varepsilon) = 0\\
  & \texttt{diff}(a \cdot \alpha, b\cdot \beta) =
    \begin{cases}
      \texttt{diff}(\alpha,\beta), & \text{ако }a = b\\
      1 + \texttt{diff}(\alpha,\beta), & \text{ако }a \neq b\\
    \end{cases}
\end{align*}

\begin{problem}
  За всеки от следните езици, отговорете дали са безконтекстни, като се обосновете:
  \begin{enumerate}[a)]
  \item 
    \ifhints
    \marginpar{Да}
    \fi
    $\{\alpha \sharp \beta \mid \alpha,\beta \in \{a,b\}^\star\ \&\ |\alpha| = |\beta|\ \&\ \texttt{diff}(\alpha,\beta^{\rev}) = 1\}$;
  \item
    \ifhints
    \marginpar{Да}
    \fi
    $\{\alpha \sharp \beta \mid \alpha, \beta \in \{a,b\}^\star\ \&\ |\alpha| = |\beta|\ \&\ \texttt{diff}(\alpha,\beta^{\rev}) \geq 1\}$;
  \item
    \ifhints 
    \marginpar{Не}
    \fi
    $\{\alpha \sharp \beta \mid \alpha, \beta \in \{a,b\}^\star\ \&\ |\alpha| = |\beta|\ \&\ \texttt{diff}(\alpha,\beta) \geq 1\}$;
  \item
    \ifhints 
    \marginpar{Да}
    \fi
    $\{\alpha\beta \mid \alpha, \beta \in \{a,b\}^\star\ \&\ |\alpha| = |\beta|\ \&\ \texttt{diff}(\alpha,\beta) \geq 1\}$;
  \item
    \ifhints
    \marginpar{Не}
    \fi
    $\{\alpha\beta \mid \alpha, \beta \in \{a,b\}^\star\ \&\ |\alpha| = |\beta|\ \&\ \texttt{diff}(\alpha,\beta) = 1\}$;
  \end{enumerate}
\end{problem}    

\begin{problem}
    Да разгледаме езика
    \[D_1 \df \{\alpha_1 \sharp \cdots \sharp \alpha_n \mid n \geq 2\ \&\ |\alpha_i| = |\alpha_{i+1}|\ \&\ \texttt{diff}(\alpha_i,\alpha^{\rev}_{i+1}) = 1\}.\]
    \begin{itemize}
    \item 
      Докажете, че $D_1$ не е безконтекстен.
    \item
      Докажете, че $D_1$ може да се представи като сечението на два безконтекстни езика.
    \end{itemize}    
\end{problem}
\begin{hint}
  Да разгледаме безконтекстния език 
  \[L_1 = \{\alpha_1 \sharp \alpha_2 \mid |\alpha_1| = |\alpha_{2}|\ \&\ \texttt{diff}(\alpha_1,\alpha^{\rev}_{2}) = 1\}.\]
  Тогава
  \begin{align*}
    D_1 =\ & L_1 \cdot (\sharp L_1)^\star \cdot (\{\varepsilon\} \cup \sharp\{a,b\}^\star)\ \cap \\
           & \{a,b\}^\star \cdot (\sharp L_1)^\star \cdot (\{\varepsilon\} \cup \sharp\{a,b\}^\star).
  \end{align*}
\end{hint}

\begin{problem}
  За произволен език $L$, дефинираме езика
  \[\texttt{Diff}_n(L) = \{\alpha \in L \mid (\exists \beta \in L)[|\alpha| = |\beta|\ \&\ \texttt{diff}(\alpha,\beta) = n]\}.\]
  Вярно ли е, че:
  \begin{itemize}
  \item 
    ако $L$ е регулярен, то $\texttt{Diff}_n(L)$ е регулярен?
  \item
    ако $L$ е безконтекстен, то $\texttt{Diff}_n(L)$ е безконтекстен?
  \end{itemize}
\end{problem}
\begin{hint}
  Мисля, че най-лесно става като се разгледа съответно автомата или стековия автомат.
\end{hint}

\begin{problem}
  \marginpar{\cite[стр. 158]{sipser3}}
  Нека $L_1$ и $L_2$ са езици. Дефинираме
  \[L_1 \triangle L_2 \df \{\alpha\beta \mid \alpha \in L_1\ \&\ \beta \in L_2\ \&\ |\alpha| = |\beta|\}.\]
  Докажете, че
  \begin{enumerate}[a)]
  \item 
    ако $L_1$ и $L_2$ са регулярни езици, то е възможно $L_1 \triangle L_2$ да не е регулярен;
  \item
    ако $L_1$ и $L_2$ са регулярни езици, то $L_1 \triangle L_2$ е безконтекстен;
  \item
    ако $L_1$ и $L_2$ са безконтекстни езици, то е възможно $L_1 \triangle L_2$ да не е безконтекстен.
  \end{enumerate}
\end{problem}

\begin{problem}
  Докажете, че ако $L$ е безконтекстен език, то 
  \[L^{\rev} = \{\omega^{\rev} \mid \omega \in L\}\]
  също е безконтекстен.
\end{problem}


\begin{problem}
  Нека $\Sigma = \{a,b,c,d,f,e\}$.
  Докажете, че езикът $L$ е безконтекстен, където за думите $\omega \in L$ са изпълнени свойствата:
  \begin{itemize}[-]
  \item 
    за всяко $n\in\Nat$, след всяко срещане на $n$ последнователни $a$-та
    следват $n$ последователни $b$-та, и $b$-та не се срещат по друг повод в $\omega$, и
  \item
    за всяко $m\in\Nat$, след всяко срещане на $m$ последнователни $c$-та
    следват $m$ последователни $d$-та, и $d$-та не се срещат по друг повод в $\omega$, и
  \item
    за всяко $k\in\Nat$, след всяко срещане на $k$ последнователни $f$-а
    следват $k$ последователни $e$-та, и $e$-та не се срещат по друг повод в $\omega$.
  \end{itemize}
\end{problem}

\begin{problem}
  Да разгледаме езиците:
  \begin{align*}
    & P = \{\alpha\in\{a,b,c\}^*\,|\, \alpha \text{ е палиндром с четна дължина}\} \\
    & L =  \{\beta b^n\,|\, n\in\mathbb{N}, \beta\in P^n\}.
  \end{align*}
  Да се докаже, че:
  \begin{enumerate}[a)]
  \item 
    $L$ не е регулярен;
  \item 
    $L$ е безконтекстен.
  \end{enumerate}
\end{problem}

\begin{problem}
  Нека $L_1$ е произволен регулярен език над азбуката $\Sigma$, 
  а $L_2$ е езика от всички думи палиндроми над $\Sigma$.
  Докажете, че $L$ е безконтекстен език, където:
  \[L = \{\alpha_1 \cdots\alpha_{3n}\beta_1\cdots\beta_m\gamma_1\cdots\gamma_n \mid \alpha_i,\gamma_j \in L_1, \beta_k\in L_2, m,n \in \Nat\}.\]
\end{problem}

\begin{problem}
  Нека $L = \{\omega\in\{a,b\}^\star \mid \card{\omega}{a} = 2\}$.
  Да се докаже, че езикът $L' = \{\alpha^n \mid \alpha\in L, n \geq 0\}$ не е безконтекстен.
\end{problem}


\begin{problem}
  Нека $\Sigma = \{a,b,c\}$ и $L \subseteq \Sigma^\star$ е безконтестен език. Ако имаме дума 
  $\alpha \in \Sigma^\star$, тогава \emph{L-вариант} на $\alpha$ ще наричаме думата, която се получава като в $\alpha$ всяко едно 
  срещане на символа $a$ заменим с (евентуално различна) дума от $L$.
  Тогава, ако $M \subseteq \Sigma^*$ е произволен безконтестен език, да се докаже че езикът
  \begin{equation*}
    M' = \{\beta\in\Sigma^\star |\ \beta \text{ е $L$-вариант на } \alpha \in M \}
  \end{equation*}
  също е безконтекстен.
\end{problem}

\begin{problem}
  Докажете, че всеки безконтекстен език над азбуката $\Sigma = \{a\}$
  е регулярен.
\end{problem}
\ifhints
\begin{hint}
  
\end{hint}
\fi

\begin{problem}
%  \marginpar{\cite{papadimitriou} стр. 149}
  Да фиксираме азбуката $\Sigma$.
  Нека $L$ е безконтекстен език, а $R$ е регулярен език.
  Докажете, че езикът
  \[L/R = \{\alpha \in \Sigma^\star \mid (\exists \beta \in R)[\alpha \beta \in L]\}\]
  е безконтекстен.
\end{problem}
\ifhints
\begin{hint}
  
\end{hint}
\fi

\begin{problem}
  Нека е дадена граматиката $G = \pair{\{a,b\}, \{S,A,B,C\},S,R}$.
  Използвайте CYK-алгоритъма, за да проверите дали
  думата $\alpha$ принадлежи на $\L(G)$, където правилата на граматиката и думата $\alpha$
  са зададени като:
  \begin{enumerate}[a)]
  \item
    $S \to BA\ |\ CA\ |\ a,\ C\to BS\ |\ SA,\ A\to a,\ B\to b$,\\
    $\alpha=bbaaa$;
  \item
    $S \to AB\ |\ BC,\ A\to BA\ |\ a,\ B\to CC\ |\ b,\ C\to AB\ |\ a$,\\
    $\alpha=baaba$;
  \item
    $S \to AB,\ A\to AC\ |\ a\ |\ b,\ B\to CB\ |\ a,\ C\to a$,\\
    $\alpha=babaa$.
  \end{enumerate}
\end{problem}

\begin{problem}
  Нека $L$ е безконтекстен език над азбуката $\Sigma$.
  Докажете, че следните езици са безконтекстни:
  \begin{enumerate}[a)]
  \item 
    $\texttt{Pref}(L) = \{\alpha \in \Sigma^\star \mid (\exists \beta \in \Sigma^\star)[\alpha\cdot\beta \in L]\}$;
  \item 
    $\texttt{Suff}(L) = \{\beta \in \Sigma^\star \mid (\exists \alpha \in \Sigma^\star)[\alpha\cdot\beta \in L]\}$;
  \item
    $\texttt{Infix}(L) = \{\beta \in \Sigma^\star \mid (\exists \alpha,\gamma \in \Sigma^\star)[\alpha \cdot \beta \cdot \gamma \in L]\}$;
  \end{enumerate}
\end{problem}

\begin{problem}
  Докажете, че езикът
  \[L = \{\ \omega_1 \sharp \omega_2 \sharp \cdots \sharp \omega_{2n} \mid n \geq 1\ \&\ \sum^n_{i=1}\abs{\omega_{2i-1}} = \sum^{n}_{i=1}\abs{\omega_{2i}}\ \}\]
  е безконтекстен.
\end{problem}
\begin{hint}
  Най-лесно става със стеков автомат, като са необходими две допълнителни букви за азбуката на стека.

  Една възможна безконтекстна граматика е следната:
  \begin{align*}
    & E \to XEX\ |\ \sharp O\ |\ O\sharp\ |\ \sharp E\sharp\\
    & O \to OO\ |\ EE\ |\ \varepsilon\\
    & X \to a\ |\ b,
  \end{align*}
  където началната променлива е $E$.
\end{hint}

\begin{prop}
  Да разгледаме езиците:
  \begin{align*}
    & L_{\text{even}} = \{\ \omega_1 \sharp \omega_2 \sharp \cdots \sharp \omega_{2n} \mid n\in\Nat\ \&\ \sum^n_{i=1}\abs{\omega_{2i-1}} = \sum^{n}_{i=1}\abs{\omega_{2i}}\ \}\\
    & L_{\text{odd}} = \{\ \omega_1 \sharp \omega_2 \sharp \cdots \sharp \omega_{2n+1} \mid n\in\Nat\ \&\ \sum^n_{i=0}\abs{\omega_{2i+1}} = \sum^{n}_{i=1}\abs{\omega_{2i}}\ \}.
  \end{align*}
  Тогава:
  \begin{align*}
    (\forall \alpha)[\ \alpha\in L_{\text{even}}\ \implies\ (\exists \alpha_1,\alpha_2)[\ & \alpha \in \{a,b\}^\star\sharp\{a,b\}^\star\ \lor\\
                                                                                        & ( \alpha = \alpha_1\alpha_2\ \&\ \alpha_1 \in L_{\text{even}}\ \&\ \alpha_2 \in L_{\text{odd}})\ \lor\\
                                                                                        &( \alpha = \alpha_1\alpha_2\ \&\ \alpha_1 \in L_{\text{odd}}\ \&\ \alpha_2 \in L_{\text{even}})\ ]\ ]\\
    (\forall \alpha)[\ \alpha\in L_{\text{odd}}\ \implies\ (\exists \alpha_1,\alpha_2)[\ &( \alpha = \alpha_1\alpha_2\ \&\ \alpha_1 \in L_{\text{even}}\ \&\ \alpha_2 \in L_{\text{even}})\ \lor\\
                                                                                        &( \alpha = \alpha_1\alpha_2\ \&\ \alpha_1 \in L_{\text{odd}}\ \&\ \alpha_2 \in L_{\text{odd}})\ ]\ ].
  \end{align*}
\end{prop}
\begin{hint}
  Да разгледаме една дума $\alpha = \omega_1 \sharp \omega_2 \sharp \cdots \sharp \omega_{2n} \in L_{\text{even}}$.
  Не е възможно $|\omega_{2i-1}| < |\omega_{2i}|$ за $i = 1,\dots,n$, защото тогава бихме имали 
  \[\sum^n_{i=1}|\omega_{2i-1}|\ <\ \sum^n_{i=1}|\omega_{2i}|.\]
  Нека $|\omega_{2i-1}| \geq |\omega_{2i}|$ за първото такова $i$.
  Тогава
  \[\alpha = \omega_1 \sharp \omega_2 \sharp \cdots \sharp\omega'_{2i-1}\omega''_{2i-1}\sharp\omega_{2i}\sharp\cdots \omega_{2n},\]
  където $|\omega''_{2i-1}| = |\omega_{2i}|$.
  Като махнем от $\alpha$ подниза $\omega''_{2i-1}\sharp\omega_{2i}$, 
  получаваме думата
  \[\alpha' = \omega_1 \sharp \omega_2 \sharp \cdots \sharp\omega'_{2i-1}\sharp\cdots \omega_{2n} \in L_{\text{odd}}.\]
  Понеже $|\alpha'| < |\alpha|$, от И.П. знаем, че $\alpha' = \alpha_1\alpha_2$, такива че
  $\alpha_1,\alpha_2 \in L_{\text{even}}$ или $\alpha_1,\alpha_2 \in L_{\text{odd}}$.
\end{hint}


% \begin{problem}
%   Нека с $\code{\A}$ да означим думата над азбуката $\{0,1\}$, която кодира крайния автомат $\A$.
%   Посочете кои от следните езици са регулярни/безконтекстни/разрешими/полуразрешими, където:
%   \begin{enumerate}[a)]
%   \item
%     $L = \{\code{\A} \mid \A\text{ е краен автомат}\}$;
%   \item
%     $L = \{\code{\A} \mid \A\text{ е краен автомат с пет състояния}\}$;
%   \item
%     $L = \{\code{\A} \mid \A\text{ е краен детерминиран автомат}\}$;
%   \item
%     $L = \{\code{\A} \mid \A\text{ е краен детерминиран тотален автомат}\}$;
%   \item
%     $L = \{\code{\A}\cdot\omega \mid \omega \in \Sigma^\star\ \&\ \omega \in \L(\A)\}$;
%   \item
%     $L = \{\code{\A}\cdot\omega \mid \omega \in \Sigma^\star\ \&\ \omega \not\in \L(\A)\}$;
%   \item
%     $L = \{\code{\A} \cdot \code{\B} \mid \A, \B \text{ са крайни автомати и } \L(\A) = \L(\B)\}$;
%   \end{enumerate}
%   Обосновете се!
% \end{problem}

\begin{problem}
  Нека $G = \CFG$ е {\em регулярна} граматика, т.е.
  всички правила на $G$ са от вида $A \to bC$ и $A \to \varepsilon$.
  Посочете кои от следните езици са безконтекстни, където:
  \begin{enumerate}[a)]
  \item 
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \vdash_G \beta\}$;
  \item 
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \vdash^\star_G \beta\}$;
  \item
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \not\vdash_G \beta\}$;
  \item
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \not\vdash^\star_G \beta\}$.
  \end{enumerate}
  Обосновете се!
\end{problem}

\begin{problem}
  Да разгледаме една {\em безконтекстна} граматика $G = \CFG$.
  Посочете кои от следните езици са безконтекстни, където:
  \begin{enumerate}[a)]
  \item 
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \vdash_G \beta\}$;
  \item
    $L = \{\alpha_1\sharp\alpha^{\rev}_2\sharp\alpha_3\sharp\alpha^{rev}_4\sharp \cdots \mid \alpha_i \in (V \cup \Sigma)^\star\ \&\ \alpha_i \vdash_G \alpha_{i+1} \text{ за }i<n\}$;
  \item 
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \vdash^\star_G \beta\}$;
  \item
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \not\vdash_G \beta\}$;
  \item
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \not\vdash^\star_G \beta\}$.
  \end{enumerate}
  Обосновете се!
\end{problem}

\begin{problem}
  Да разгледаме една {\em неограничена} граматика $G = \CFG$.
  Посочете кои от следните езици са безконтекстни, където:
  \begin{enumerate}[a)]
  \item 
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \vdash_G \beta\}$;
  \item 
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \vdash^\star_G \beta\}$;
  \item
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \not\vdash_G \beta\}$;
  \item
    $L = \{\alpha\sharp\beta^{\rev} \mid \alpha,\beta \in (V \cup \Sigma)^\star\ \&\ \alpha \not\vdash^\star_G \beta\}$.
  \end{enumerate}
  Обосновете се!
\end{problem}



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../eai"
%%% End:
